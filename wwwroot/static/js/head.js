!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/static/js/",n(n.s=11)}([,function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"p",(function(){return r})),n.d(t,"n",(function(){return o})),n.d(t,"o",(function(){return a})),n.d(t,"m",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return m})),n.d(t,"h",(function(){return v})),n.d(t,"k",(function(){return y})),n.d(t,"e",(function(){return x}));var r="undefined",o="object",a="prototype",s="function";function c(){return("undefined"==typeof globalThis?"undefined":i(globalThis))!==r&&globalThis?globalThis:("undefined"==typeof self?"undefined":i(self))!==r&&self?self:("undefined"==typeof window?"undefined":i(window))!==r&&window?window:(void 0===e?"undefined":i(e))!==r&&e?e:null}function u(e){var t=c();return t&&t[e]?t[e]:"window"===e&&l()?window:null}function l(){return Boolean(("undefined"==typeof window?"undefined":i(window))===o&&window)}function p(){return l()?window:u("window")}function f(){return Boolean(("undefined"==typeof document?"undefined":i(document))===o&&document)}function d(){return f()?document:u("document")}function h(){return Boolean(("undefined"==typeof navigator?"undefined":i(navigator))===o&&navigator)?navigator:u("navigator")}function g(){return Boolean(("undefined"==typeof history?"undefined":i(history))===o&&history)?history:u("history")}function m(){return("undefined"==typeof location?"undefined":i(location))===o&&location?location:u("location")}function v(){return u("performance")}function y(){return Boolean(("undefined"==typeof JSON?"undefined":i(JSON))===o&&JSON||null!==u("JSON"))}function x(){return y()?JSON||u("JSON"):null}}).call(this,n(4))},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i={SELECTOR:{GLOBAL:".js-toggle",LOCAL:".js-toggle__local"},OPTIONS:{LOCAL:{local:!0}}},r={META:"data-ai"}},,function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(i=window)}e.exports=i},,,,,,,function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"Util",(function(){return ft})),n.d(i,"CorrelationIdHelper",(function(){return ht})),n.d(i,"UrlHelper",(function(){return dt})),n.d(i,"DateTimeUtils",(function(){return mt})),n.d(i,"ConnectionStringParser",(function(){return _t})),n.d(i,"FieldType",(function(){return Qe})),n.d(i,"RequestHeaders",(function(){return at})),n.d(i,"DisabledPropertyName",(function(){return vt})),n.d(i,"ProcessLegacy",(function(){return xt})),n.d(i,"SampleRate",(function(){return yt})),n.d(i,"HttpMethod",(function(){return It})),n.d(i,"DEFAULT_BREEZE_ENDPOINT",(function(){return bt})),n.d(i,"AIData",(function(){return Tt})),n.d(i,"AIBase",(function(){return St})),n.d(i,"Envelope",(function(){return Ct})),n.d(i,"Event",(function(){return Dt})),n.d(i,"Exception",(function(){return kt})),n.d(i,"Metric",(function(){return Ut})),n.d(i,"PageView",(function(){return qt})),n.d(i,"PageViewData",(function(){return jt})),n.d(i,"RemoteDependencyData",(function(){return Ft})),n.d(i,"Trace",(function(){return zt})),n.d(i,"PageViewPerformance",(function(){return Ht})),n.d(i,"Data",(function(){return Vt})),n.d(i,"SeverityLevel",(function(){return Mt})),n.d(i,"ConfigurationManager",(function(){return Bt})),n.d(i,"ContextTagKeys",(function(){return Gt})),n.d(i,"DataSanitizer",(function(){return st})),n.d(i,"TelemetryItemCreator",(function(){return Wt})),n.d(i,"CtxTagKeys",(function(){return Xt})),n.d(i,"Extensions",(function(){return Kt})),n.d(i,"DistributedTracingModes",(function(){return Ze})),n.d(i,"PropertiesPluginIdentifier",(function(){return Yt})),n.d(i,"BreezeChannelIdentifier",(function(){return Jt})),n.d(i,"AnalyticsPluginIdentifier",(function(){return Qt}));var r=n(2);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function a(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var c=n(1);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}c.p;function l(e,t){return u(e)===t}function p(e){return l(e,c.p)||void 0===e}function f(e){return p(e)||null===e}function d(e,t){return e&&Object[c.o].hasOwnProperty.call(e,t)}function h(e){return l(e,c.n)}function g(e){return l(e,c.m)}function m(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!f(e))try{f(e.addEventListener)?f(e.attachEvent)||(e.attachEvent("on"+t,n),r=!0):(e.addEventListener(t,n,i),r=!0)}catch(e){}return r}function v(e,t,n,i){if(void 0===i&&(i=!1),!f(e))try{f(e.removeEventListener)?f(e.detachEvent)||e.detachEvent("on"+t,n):e.removeEventListener(t,n,i)}catch(e){}}var y,x=function(){function e(){}return e.isDate=function(e){return"[object Date]"===Object[c.o].toString.call(e)},e.isString=function(e){return l(e,"string")},e.isNumber=function(e){return l(e,"number")},e.isBoolean=function(e){return l(e,"boolean")},e.disableCookies=function(){e._canUseCookies=!1},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(I,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.toISOString=function(t){if(e.isDate(t)){var n=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},e.arrForEach=function(e,t,n){for(var i=e.length,r=0;r<i;++r)r in e&&t.call(n||e,e[r],r,e)},e.arrIndexOf=function(e,t,n){for(var i=e.length,r=n||0,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;o++)if(o in e&&e[o]===t)return o;return-1},e.arrMap=function(e,t,n){for(var i=e.length,r=n||e,o=new Array(i),a=0;a<i;a++)a in e&&(o[a]=t.call(r,e[a],e));return o},e.arrReduce=function(e,t,n){var i,r=e.length,o=0;if(arguments.length>=3)i=arguments[2];else{for(;o<r&&!(o in e);)o++;i=e[o++]}for(;o<r;)o in e&&(i=t(i,e[o],o,e)),o++;return i},e.objCreate=function(e){if(null==e)return{};if(!h(e)&&!g(e))throw new TypeError("Object prototype may only be an Object: "+e);function t(){}return t[c.o]=e,new t},e.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(g(e)||h(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n=[];for(var i in e)d(e,i)&&n.push(i);if(t)for(var r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length,a=0;a<o;a++)d(e,r[a])&&n.push(r[a]);return n},e.objDefineAccessors=function(e,t,n,i){var r=Object.defineProperty;if(r)try{var o={enumerable:!0,configurable:!0};return n&&(o.get=n),i&&(o.set=i),r(e,t,o),!0}catch(e){}return!1},e.addEventHandler=function(e,t){var n=!1,i=Object(c.i)();i&&(n=m(i,e,t),n=m(i.body,e,t)||n);var r=Object(c.a)();return r&&(n=b.Attach(r,e,t)||n),n},e.isTypeof=l,e.isUndefined=p,e.isNullOrUndefined=f,e.hasOwnProperty=d,e.isFunction=g,e.isObject=h,e}(),I=/[xy]/g,b=function(){function e(){}return e.Attach=m,e.AttachEvent=m,e.Detach=v,e.DetachEvent=v,e}();!function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"}(y||(y={}));var _=0,S=1,T=2,C=3,w=4,E=5,D=6,N=7,A=8,k=9,L=10,R=11,P=12,M=13,O=14,U=15,j=16,q=17,F=18,z=19,H=20,V=22,B=23,G=24,W=25,K=26,X=27,Y=28,J=29,Q=30,Z=31,$=32,ee=33,te=35,ne=36,ie=37,re=38,oe=39,ae=40,se=41,ce=42,ue=43,le=45,pe=46,fe=47,de=48,he=49,ge=50,me=52,ve=54,ye=55,xe=56,Ie=57,be=58,_e=60,Se=61,Te=62,Ce=63,we=64,Ee=66,De=67,Ne=68,Ae=69,ke=70,Le=71,Re=72,Pe=73,Me=function(){function e(t,n,i,r){void 0===i&&(i=!1),this.messageId=t,this.message=(i?e.AiUserActionablePrefix:e.AiNonUserActionablePrefix)+t;var o="";Object(c.k)()&&(o=Object(c.e)().stringify(r));var a=(n?" message:"+e.sanitizeDiagnosticText(n):"")+(r?" props:"+e.sanitizeDiagnosticText(o):"");this.message+=a}return e.sanitizeDiagnosticText=function(e){return e?'"'+e.replace(/\"/g,"")+'"':""},e.dataType="MessageData",e.AiNonUserActionablePrefix="AI (Internal): ",e.AiUserActionablePrefix="AI: ",e}(),Oe=function(){function e(e){this.queue=[],this.AIInternalMessagePrefix="AITR_",this._messageCount=0,this._messageLogged={},this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},x.isNullOrUndefined(e)||(x.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),x.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),x.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),x.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return e.prototype.throwInternal=function(e,t,n,i,r){void 0===r&&(r=!1);var o=new Me(t,n,r,i);if(this.enableDebugExceptions())throw o;if(!x.isUndefined(o)&&o&&!x.isUndefined(o.message)){if(r){var a=+o.messageId;!this._messageLogged[a]&&this.consoleLoggingLevel()>=y.WARNING&&(this.warnToConsole(o.message),this._messageLogged[a]=!0)}else this.consoleLoggingLevel()>=y.WARNING&&this.warnToConsole(o.message);this.logInternalMessage(e,o)}},e.prototype.warnToConsole=function(e){!x.isUndefined(console)&&console&&(x.isFunction(console.warn)?console.warn(e):x.isFunction(console.log)&&console.log(e))},e.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,i=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[i]?n=!1:this._messageLogged[i]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount===this.maxInternalMessageLimit())){var r="Internal events throttle limit per PageView reached for this app.",o=new Me(B,r,!1);this.queue.push(o),this.warnToConsole(r)}}},e.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},e}(),Ue=x.isFunction,je=function(e,t){var n=this,i=null,r=Ue(e.processTelemetry),o=Ue(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(e){i=e},n.processTelemetry=function(a,s){if(s||(s=t),e&&r){n._hasRun=!0;try{s.setNext(i),o&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(a,s)}catch(t){var c=i&&i._hasRun;i&&c||s.diagLog().throwInternal(y.CRITICAL,Pe,"Plugin ["+e.identifier+"] failed during processTelemetry - "+t),i&&!c&&i.processTelemetry(a,s)}}else i&&(n._hasRun=!0,i.processTelemetry(a,s))}},qe=x.isNullOrUndefined;function Fe(e,t){var n=[];if(e&&e.length>0)for(var i=null,r=0;r<e.length;r++){var o=e[r];if(o&&x.isFunction(o.processTelemetry)){var a=new je(o,t);n.push(a),i&&i.setNext(a),i=a}}return n.length>0?n[0]:null}var ze=function e(t,n,i,r){var o=this,a=null;null!==r&&(t&&x.isFunction(t.getPlugin)?a=function(e,t,n){var i=[],r=!n;if(e)for(;e;){var o=e.getPlugin();(r||o===n)&&(r=!0,i.push(o)),e=e.getNext()}return r||i.push(n),Fe(i,t)}(t,o,r||t.getPlugin()):r?a=function(e,t,n){var i=e,r=!1;return n&&e&&(i=[],x.arrForEach(e,(function(e){(r||e===n)&&(r=!0,i.push(e))}))),n&&!r&&(i||(i=[]),i.push(n)),Fe(i,t)}(t,o,r):x.isUndefined(r)&&(a=Fe(t,o))),o.core=function(){return i},o.diagLog=function(){var e=(i||{}).logger;return e||(e=new Oe(n||{})),e},o.getCfg=function(){return n},o.getExtCfg=function(e,t){var i;if(void 0===t&&(t={}),n){var r=n.extensionConfig;r&&e&&(i=r[e])}return i||t},o.getConfig=function(e,t,i){var r;void 0===i&&(i=!1);var a=o.getExtCfg(e,null);return a&&!qe(a[t])?r=a[t]:n&&!qe(n[t])&&(r=n[t]),qe(r)?i:r},o.hasNext=function(){return null!=a},o.getNext=function(){return a},o.setNext=function(e){a=e},o.processNext=function(e){var t=a;t&&(a=t.getNext(),t.processTelemetry(e,o))},o.createNew=function(t,r){return void 0===t&&(t=null),new e(t||a,n,i,r)}},He=x.isFunction,Ve=function(){function e(){var e=this,t=!1,n=null,i=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){i=e},e.processNext=function(e,t){t?t.processNext(e):i&&He(i.processTelemetry)&&i.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var r=t;if(!r){var o=n||new ze(null,{},e.core);r=i&&i.getPlugin?o.createNew(null,i.getPlugin):o.createNew(null,i)}return r},e._baseTelInit=function(r,o,a,s){r&&(r.extensionConfig=r.extensionConfig||[]),!s&&o&&(s=o.getProcessTelContext().getNext());var c=i;i&&i.getPlugin&&(c=i.getPlugin()),e.core=o,n=new ze(s,r,o,c),t=!0}}return e.prototype.initialize=function(e,t,n,i){this._baseTelInit(e,t,n,i)},e}(),Be=x.isFunction;function Ge(e,t){for(var n=[],i=null,r=e.getNext();r;){var o=r.getPlugin();o&&(i&&Be(i.setNextPlugin)&&Be(o.processTelemetry)&&i.setNextPlugin(o),Be(o.isInitialized)&&o.isInitialized()||n.push(o),i=o,r=r.getNext())}x.arrForEach(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function We(e){return e.sort((function(e,t){var n=0,i=Be(t.processTelemetry);return Be(e.processTelemetry)?n=i?e.priority-t.priority:1:i&&(n=-1),n}))}var Ke=x.arrForEach,Xe=x.objDefineAccessors;function Ye(e,t){t&&t.length>0&&(function(e){Ke(e,(function(e){if(e.priority<500)throw Error("Channel has invalid priority"+e.identifier)}))}(t=t.sort((function(e,t){return e.priority-t.priority}))),e.push(t))}var Je,Qe,Ze,$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="ChannelControllerPlugin",t.priority=500,t}return a(t,e),t.prototype.processTelemetry=function(e,t){var n=this;this._channelQueue&&Ke(this._channelQueue,(function(i){i.length>0&&n._getTelCtx(t).createNew(i).processNext(e)}))},t.prototype.getChannelControls=function(){return this._channelQueue},t.prototype.initialize=function(t,n,i){if(!this.isInitialized()){e.prototype.initialize.call(this,t,n,i),t.isCookieUseDisabled&&x.disableCookies();var r=this._channelQueue=function(e,t){var n=[];if(e&&Ke(e,(function(e){return Ye(n,e)})),t){var i=[];Ke(t,(function(e){e.priority>500&&i.push(e)})),Ye(n,i)}return n}((t||{}).channels,i);Ke(r,(function(e){return Ge(new ze(e,t,n),i)}))}},t._staticInit=(Xe(t.prototype,"ChannelControls",t.prototype.getChannelControls),void Xe(t.prototype,"channelQueue",t.prototype.getChannelControls)),t}(Ve),et=x.arrForEach,tt=x.isNullOrUndefined,nt=function(){function e(){var e=!1;this._extensions=new Array,this._channelController=new $e,this.isInitialized=function(){return e},this._setInit=function(t){e=t},this._eventQueue=[]}return e.prototype.initialize=function(e,t,n,i){if(this.isInitialized())throw Error("Core should not be initialized more than once");if(!e||tt(e.instrumentationKey))throw Error("Please provide instrumentation key");this.config=e;var r=this._channelController;i||(i=x.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){}})),this._notificationManager=i,e.extensions=tt(e.extensions)?[]:e.extensions,(e.extensionConfig=tt(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=i,n||(n=x.objCreate({throwInternal:function(e,t,n,i,r){void 0===r&&(r=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}})),this.logger=n;var o=[];o.push.apply(o,t.concat(e.extensions)),o=We(o);var a=[],s=[],c={};if(et(o,(function(e){if(tt(e)||tt(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,i=e.identifier;e&&t&&(tt(c[t])?c[t]=i:n.warnToConsole("Two extensions have same priority #"+t+" - "+c[t]+", "+i)),!t||t<r.priority?a.push(e):s.push(e)})),o.push(r),a.push(r),o=We(o),this._extensions=o,Ge(new ze([r],e,this),o),Ge(new ze(a,e,this),o),this._extensions=a,0===this.getTransmissionControls().length)throw new Error("No channels available");this._setInit(!0)},e.prototype.getTransmissionControls=function(){return this._channelController.getChannelControls()},e.prototype.track=function(e){var t=this;e.iKey||(e.iKey=t.config.instrumentationKey),e.time||(e.time=x.toISOString(new Date)),tt(e.ver)&&(e.ver="4.0"),t.isInitialized()?(t._eventQueue.length>0&&(et(t._eventQueue,(function(e){t.getProcessTelContext().processNext(e)})),t._eventQueue=[]),t.getProcessTelContext().processNext(e)):t._eventQueue.push(e)},e.prototype.getProcessTelContext=function(){var e=this._extensions,t=e;return e&&0!==e.length||(t=[this._channelController]),new ze(t,this.config,this)},e}(),it=2,rt=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=x.arrIndexOf(this.listeners,e);t>-1;)this.listeners.splice(t,1),t=x.arrIndexOf(this.listeners,e)},e.prototype.eventsSent=function(e){for(var t=this,n=function(n){i.listeners[n].eventsSent&&setTimeout((function(){return t.listeners[n].eventsSent(e)}),0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.prototype.eventsDiscarded=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsDiscarded&&setTimeout((function(){return n.listeners[i].eventsDiscarded(e,t)}),0)},r=this,o=0;o<this.listeners.length;++o)i(o)},e}(),ot=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.initialize=function(t,n){this._notificationManager=new rt,this.logger=new Oe(t),this.config=t,e.prototype.initialize.call(this,t,n,this.logger,this._notificationManager)},t.prototype.getTransmissionControls=function(){return e.prototype.getTransmissionControls.call(this)},t.prototype.track=function(t){if(null===t)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");this._validateTelemetryItem(t),e.prototype.track.call(this,t)},t.prototype.addNotificationListener=function(e){this._notificationManager&&this._notificationManager.addNotificationListener(e)},t.prototype.removeNotificationListener=function(e){this._notificationManager&&this._notificationManager.removeNotificationListener(e)},t.prototype.pollInternalLogs=function(e){var t=this,n=this.config.diagnosticLogInterval;return n&&n>0||(n=1e4),setInterval((function(){var n=t,i=n.logger?n.logger.queue:[];x.arrForEach(i,(function(t){var i={name:e||"InternalMessageId: "+t.messageId,iKey:n.config.instrumentationKey,time:x.toISOString(new Date),baseType:Me.dataType,baseData:{message:t.message}};n.track(i)})),i.length=0}),n)},t.prototype._validateTelemetryItem=function(e){if(x.isNullOrUndefined(e.name))throw this._notifyInvalidEvent(e),Error("telemetry name required")},t.prototype._notifyInvalidEvent=function(e){this._notificationManager&&this._notificationManager.eventsDiscarded([e],it)},t}(nt);!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(Je||(Je={})),function(e){e[e.Default=0]="Default",e[e.Required=1]="Required",e[e.Array=2]="Array",e[e.Hidden=4]="Hidden"}(Qe||(Qe={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(Ze||(Ze={}));var at=function(){function e(){}return e.requestContextHeader="Request-Context",e.requestContextTargetKey="appId",e.requestContextAppIdFormat="appId=cid-v1:",e.requestIdHeader="Request-Id",e.traceParentHeader="traceparent",e.sdkContextHeader="Sdk-Context",e.sdkContextHeaderAppIdRequest="appId",e.requestContextHeaderLowerCase="request-context",e}(),st=function(){function e(){}return e.sanitizeKeyAndAddUniqueness=function(t,n,i){var r=n.length,o=e.sanitizeKey(t,n);if(o.length!==r){for(var a=0,s=o;void 0!==i[s];)a++,s=o.substring(0,e.MAX_NAME_LENGTH-3)+e.padNumber(a);o=s}return o},e.sanitizeKey=function(t,n){var i;return n&&(n=e.trim(n.toString())).length>e.MAX_NAME_LENGTH&&(i=n.substring(0,e.MAX_NAME_LENGTH),t.throwInternal(y.WARNING,Ie,"name is too long.  It has been truncated to "+e.MAX_NAME_LENGTH+" characters.",{name:n},!0)),i||n},e.sanitizeString=function(t,n,i){var r;return void 0===i&&(i=e.MAX_STRING_LENGTH),n&&(i=i||e.MAX_STRING_LENGTH,(n=e.trim(n)).toString().length>i&&(r=n.toString().substring(0,i),t.throwInternal(y.WARNING,Se,"string value is too long. It has been truncated to "+i+" characters.",{value:n},!0))),r||n},e.sanitizeUrl=function(t,n){return e.sanitizeInput(t,n,e.MAX_URL_LENGTH,Ee)},e.sanitizeMessage=function(t,n){var i;return n&&n.length>e.MAX_MESSAGE_LENGTH&&(i=n.substring(0,e.MAX_MESSAGE_LENGTH),t.throwInternal(y.WARNING,xe,"message is too long, it has been truncated to "+e.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),i||n},e.sanitizeException=function(t,n){var i;return n&&n.length>e.MAX_EXCEPTION_LENGTH&&(i=n.substring(0,e.MAX_EXCEPTION_LENGTH),t.throwInternal(y.WARNING,me,"exception is too long, it has been truncated to "+e.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),i||n},e.sanitizeProperties=function(t,n){if(n){var i={};for(var r in n){var o=n[r];if(x.isObject(o)&&Object(c.k)())try{o=Object(c.e)().stringify(o)}catch(e){t.throwInternal(y.WARNING,he,"custom property is not valid",{exception:e},!0)}o=e.sanitizeString(t,o,e.MAX_PROPERTY_LENGTH),i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=o}n=i}return n},e.sanitizeMeasurements=function(t,n){if(n){var i={};for(var r in n){var o=n[r];i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=o}n=i}return n},e.sanitizeId=function(t,n){return n?e.sanitizeInput(t,n,e.MAX_ID_LENGTH,Ae).toString():n},e.sanitizeInput=function(t,n,i,r){var o;return n&&(n=e.trim(n)).length>i&&(o=n.substring(0,i),t.throwInternal(y.WARNING,r,"input is too long, it has been truncated to "+i+" characters.",{data:n},!0)),o||n},e.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},e.trim=function(e){return x.isString(e)?e.replace(/^\s+|\s+$/g,""):e},e.MAX_NAME_LENGTH=150,e.MAX_ID_LENGTH=128,e.MAX_PROPERTY_LENGTH=8192,e.MAX_STRING_LENGTH=1024,e.MAX_URL_LENGTH=2048,e.MAX_MESSAGE_LENGTH=32768,e.MAX_EXCEPTION_LENGTH=32768,e}(),ct=Object(c.g)(),ut=x.isString,lt=null;var pt,ft=function(){function e(){}return e.createDomEvent=function(e){var t=null;if(x.isFunction(Event))t=new Event(e);else{var n=Object(c.a)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t},e.disableStorage=function(){e._canUseLocalStorage=!1,e._canUseSessionStorage=!1},e._getLocalStorageObject=function(){return e.canUseLocalStorage()?e._getVerifiedStorageObject(Je.LocalStorage):null},e._getVerifiedStorageObject=function(e){var t,n,i=null;try{if(x.isNullOrUndefined(Object(c.b)()))return null;n=new Date,(i=e===Je.LocalStorage?Object(c.c)("localStorage"):Object(c.c)("sessionStorage")).setItem(n.toString(),n.toString()),t=i.getItem(n.toString())!==n.toString(),i.removeItem(n.toString()),t&&(i=null)}catch(e){i=null}return i},e.isInternalApplicationInsightsEndpoint=function(t){return-1!==e._internalEndpoints.indexOf(t.toLowerCase())},e.canUseLocalStorage=function(){return void 0===e._canUseLocalStorage&&(e._canUseLocalStorage=!!e._getVerifiedStorageObject(Je.LocalStorage)),e._canUseLocalStorage},e.getStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseLocalStorage=!1,t.throwInternal(y.WARNING,S,"Browser failed read of local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setStorage=function(t,n,i){var r=e._getLocalStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(y.WARNING,C,"Browser failed write to local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(y.WARNING,E,"Browser failed removal of local storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e._getSessionStorageObject=function(){return e.canUseSessionStorage()?e._getVerifiedStorageObject(Je.SessionStorage):null},e.canUseSessionStorage=function(){return void 0===e._canUseSessionStorage&&(e._canUseSessionStorage=!!e._getVerifiedStorageObject(Je.SessionStorage)),e._canUseSessionStorage},e.getSessionStorageKeys=function(){var t=[];if(e.canUseSessionStorage())for(var n in Object(c.c)("sessionStorage"))t.push(n);return t},e.getSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseSessionStorage=!1,t.throwInternal(y.WARNING,T,"Browser failed read of session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setSessionStorage=function(t,n,i){var r=e._getSessionStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(y.WARNING,w,"Browser failed write to session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(y.WARNING,D,"Browser failed removal of session storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.disableCookies=function(){x.disableCookies()},e.canUseCookies=function(t){if(void 0===x._canUseCookies){x._canUseCookies=!1;try{x._canUseCookies=void 0!==e.document.cookie}catch(n){t.throwInternal(y.WARNING,Ne,"Cannot access document.cookie - "+e.getExceptionName(n),{exception:e.dump(n)})}}return x._canUseCookies},e.disallowsSameSiteNone=function(e){return!!ut(e)&&(-1!==e.indexOf("CPU iPhone OS 12")||-1!==e.indexOf("iPad; CPU OS 12")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==e.indexOf("Version/")&&-1!==e.indexOf("Safari")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&(n="AppleWebKit/605.1.15 (KHTML, like Gecko)",i=(t=e).length,r=i-n.length,t.substring(r>=0?r:0,i)===n)||(-1!==e.indexOf("Chrome/5")||-1!==e.indexOf("Chrome/6")||(-1!==e.indexOf("UnrealEngine")&&-1===e.indexOf("Chrome")||(-1!==e.indexOf("UCBrowser/12")||-1!==e.indexOf("UCBrowser/11")))))));var t,n,i,r},e.setCookie=function(t,n,i,r){if(e.canUseCookies(t)){var o="",a="";r&&(o=";domain="+r);var s=Object(c.f)();s&&"https:"===s.protocol&&(a=";secure",null===lt&&(lt=e.disallowsSameSiteNone((Object(c.g)()||{}).userAgent)),lt||(i+=";SameSite=None")),e.document.cookie=n+"="+i+o+";path=/"+a}},e.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},e.getCookie=function(t,n){if(e.canUseCookies(t)){var i="";if(n&&n.length)for(var r=n+"=",o=e.document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];if((s=e.trim(s))&&0===s.indexOf(r)){i=s.substring(r.length,o[a].length);break}}return i}},e.deleteCookie=function(t,n){e.canUseCookies(t)&&(e.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e.trim=function(e){return ut(e)?e.replace(/^\s+|\s+$/g,""):e},e.newId=function(){for(var e="",t=1073741824*Math.random();t>0;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64)}return e},e.random32=function(){return 4294967296*Math.random()|0},e.generateW3CId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<4;r++)i+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+o+i.substr(16,3)+i.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object[c.o].toString.call(e)},e.isError=function(e){return"[object Error]"===Object[c.o].toString.call(e)},e.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():ct?(ct.userAgent||"").toLowerCase():"";return-1!==t.indexOf("msie")?parseInt(t.split("msie")[1]):null},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,i=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,(o>0?o+".":"")+(r=r.length<2?"0"+r:r)+":"+i+":"+n+"."+t},e.isCrossOriginError=function(e,t,n,i,r){return("Script error."===e||"Script error"===e)&&!r},e.dump=function(e){var t=Object[c.o].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Object(c.k)()&&(n=Object(c.e)().stringify(e)),t+n},e.getExceptionName=function(e){return"[object Error]"===Object[c.o].toString.call(e)?e.name:""},e.addEventHandler=function(e,t){return b.Attach(Object(c.i)(),e,t)},e.IsBeaconApiSupported=function(){return"sendBeacon"in ct&&ct.sendBeacon},e.getExtension=function(e,t){for(var n=null,i=0;!n&&i<e.length;)e[i]&&e[i].identifier===t&&(n=e[i]),i++;return n},e.document=Object(c.a)()||{},e._canUseLocalStorage=void 0,e._canUseSessionStorage=void 0,e._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],e.NotSpecified="not_specified",e.isDate=x.isDate,e.toISOStringForIE8=x.toISOString,e}(),dt=function(){function e(){}return e.parseUrl=function(t){return e.htmlAnchorElement||(e.htmlAnchorElement=e.document.createElement?e.document.createElement("a"):{host:e.parseHost(t)}),e.htmlAnchorElement.href=t,e.htmlAnchorElement},e.getAbsoluteUrl=function(t){var n,i=e.parseUrl(t);return i&&(n=i.href),n},e.getPathName=function(t){var n,i=e.parseUrl(t);return i&&(n=i.pathname),n},e.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},e.parseHost=function(e){if(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(null!=t&&t.length>2&&ut(t[2])&&t[2].length>0)return t[2]}return null},e.document=Object(c.a)()||{},e}(),ht=function(){function e(){}return e.canIncludeCorrelationHeader=function(e,t,n){if(e&&e.disableCorrelationHeaders)return!1;if(!t)return!1;var i=dt.parseUrl(t).host.toLowerCase();if(!(e&&e.enableCorsCorrelation||i===n))return!1;var r,o=e&&e.correlationHeaderDomains;if(o&&(x.arrForEach(o,(function(e){var t=new RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));r=r||t.test(i)})),!r))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0===a.length)return!0;for(var s=0;s<a.length;s++){if(new RegExp(a[s].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(i))return!1}return i&&i.length>0},e.getCorrelationContext=function(t){if(t){var n=e.getCorrelationContextValue(t,at.requestContextTargetKey);if(n&&n!==e.correlationIdPrefix)return n}},e.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),i=0;i<n.length;++i){var r=n[i].split("=");if(2===r.length&&r[0]===t)return r[1]}},e.correlationIdPrefix="cid-v1:",e}(),gt=function(){function e(){}return e.ParseDependencyPath=function(e,t,n,i){var r,o=i,a=i;if(t&&t.length>0){var s=dt.parseUrl(t);if(r=s.host,!o)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),a=s.pathname,o=st.sanitizeString(e,n?n+" "+c:c)}else o=st.sanitizeString(e,t)}else r=i,o=i;return{target:r,name:o,data:a}},e}(),mt=function(){function e(){}return e.Now=function(){var e=Object(c.h)();return e&&e.now&&e.timing?e.now()+e.timing.navigationStart:(new Date).getTime()},e.GetDuration=function(e,t){var n=null;return 0===e||0===t||x.isNullOrUndefined(e)||x.isNullOrUndefined(t)||(n=t-e),n},e}(),vt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",yt="sampleRate",xt="ProcessLegacy",It="http.method",bt="https://dc.services.visualstudio.com",_t=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR),i=x.arrReduce(n,(function(t,n){var i=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===i.length){var r=i[0].toLowerCase(),o=i[1];t[r]=o}return t}),{});if(x.objKeys(i).length>0){if(i.endpointsuffix){var r=i.location?i.location+".":"";i.ingestionendpoint=i.ingestionendpoint||"https://"+r+"dc."+i.endpointsuffix}i.ingestionendpoint=i.ingestionendpoint||bt}return i},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}(),St=function(){},Tt=function(e){function t(){return e.call(this)||this}return a(t,e),t}(St),Ct=function(e){function t(t,n,i){var r=e.call(this)||this;return r.name=st.sanitizeString(t,i)||ft.NotSpecified,r.data=n,r.time=x.toISOString(new Date),r.aiDataContract={time:Qe.Required,iKey:Qe.Required,name:Qe.Required,sampleRate:function(){return 100===r.sampleRate?Qe.Hidden:Qe.Required},tags:Qe.Required,data:Qe.Required},r}return a(t,e),t}((function(){this.ver=1,this.sampleRate=100,this.tags={}})),wt=function(){},Et=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return a(t,e),t}(wt),Dt=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.aiDataContract={ver:Qe.Required,name:Qe.Required,properties:Qe.Default,measurements:Qe.Default},o.name=st.sanitizeString(t,n)||ft.NotSpecified,o.properties=st.sanitizeProperties(t,i),o.measurements=st.sanitizeMeasurements(t,r),o}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(Et),Nt=function(){},At=function(){this.hasFullStack=!0,this.parsedStack=[]},kt=function(e){function t(t,n,i,r,o,a){var s=e.call(this)||this;return s.aiDataContract={ver:Qe.Required,exceptions:Qe.Required,severityLevel:Qe.Default,properties:Qe.Default,measurements:Qe.Default},n instanceof Error?(s.exceptions=[new Lt(t,n)],s.properties=st.sanitizeProperties(t,i),s.measurements=st.sanitizeMeasurements(t,r),o&&(s.severityLevel=o),a&&(s.id=a)):(s.exceptions=n.exceptions,s.properties=n.properties,s.measurements=n.measurements,n.severityLevel&&(s.severityLevel=n.severityLevel),n.id&&(s.id=n.id),n.problemGroup&&(s.problemGroup=n.problemGroup),s.ver=2,x.isNullOrUndefined(n.isManual)||(s.isManual=n.isManual)),s}return a(t,e),t.CreateFromInterface=function(e,n){var i=n.exceptions&&x.arrMap(n.exceptions,(function(t){return Lt.CreateFromInterface(e,t)}));return new t(e,s({},n,{exceptions:i}))},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,i=e.measurements,r=e.severityLevel,o=(e.ver,e.problemGroup),a=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&x.arrMap(t,(function(e){return e.toInterface()}))||void 0,severityLevel:r,properties:n,measurements:i,problemGroup:o,id:a,isManual:s}},t.CreateSimpleException=function(e,t,n,i,r,o){return{exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return a(t,e),t}(wt)),Lt=function(e){function t(n,i){var r=e.call(this)||this;if(r.aiDataContract={id:Qe.Default,outerId:Qe.Default,typeName:Qe.Required,message:Qe.Required,hasFullStack:Qe.Default,stack:Qe.Default,parsedStack:Qe.Array},i instanceof Error){r.typeName=st.sanitizeString(n,i.name)||ft.NotSpecified,r.message=st.sanitizeMessage(n,i.message)||ft.NotSpecified;var o=i.stack;r.parsedStack=t.parseStack(o),r.stack=st.sanitizeException(n,o),r.hasFullStack=ft.isArray(r.parsedStack)&&r.parsedStack.length>0}else r.typeName=i.typeName,r.message=i.message,r.stack=i.stack,r.parsedStack=i.parsedStack,r.hasFullStack=i.hasFullStack;return r}return a(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&x.arrMap(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var i=n.parsedStack instanceof Array&&x.arrMap(n.parsedStack,(function(e){return Rt.CreateFromInterface(e)}))||n.parsedStack;return new t(e,s({},n,{parsedStack:i}))},t.parseStack=function(e){var t;if(x.isString(e)){var n=e.split("\n");t=[];for(var i=0,r=0,o=0;o<=n.length;o++){var a=n[o];if(Rt.regex.test(a)){var s=new Rt(n[o],i++);r+=s.sizeInBytes,t.push(s)}}if(r>32768)for(var c=0,u=t.length-1,l=0,p=c,f=u;c<u;){if((l+=t[c].sizeInBytes+t[u].sizeInBytes)>32768){var d=f-p+1;t.splice(p,d);break}p=c,f=u,c++,u--}}return t},t}(At),Rt=function(e){function t(n,i){var r=e.call(this)||this;if(r.sizeInBytes=0,r.aiDataContract={level:Qe.Required,method:Qe.Required,assembly:Qe.Default,fileName:Qe.Default,line:Qe.Default},"string"==typeof n){var o=n;r.level=i,r.method="<no_method>",r.assembly=ft.trim(o),r.fileName="",r.line=0;var a=o.match(t.regex);a&&a.length>=5&&(r.method=ft.trim(a[2])||r.method,r.fileName=ft.trim(a[4]),r.line=parseInt(a[5])||0)}else r.level=n.level,r.method=n.method,r.assembly=n.assembly,r.fileName=n.fileName,r.line=n.line,r.sizeInBytes=0;return r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=t.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}return a(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(Nt),Pt=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t.measurements={},t}return a(t,e),t}(wt);!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(pt||(pt={}));var Mt,Ot=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:Qe.Required,kind:Qe.Default,value:Qe.Required,count:Qe.Default,min:Qe.Default,max:Qe.Default,stdDev:Qe.Default},t}return a(t,e),t}((function(){this.kind=pt.Measurement})),Ut=function(e){function t(t,n,i,r,o,a,s,c){var u=e.call(this)||this;u.aiDataContract={ver:Qe.Required,metrics:Qe.Required,properties:Qe.Default};var l=new Ot;return l.count=r>0?r:void 0,l.max=isNaN(a)||null===a?void 0:a,l.min=isNaN(o)||null===o?void 0:o,l.name=st.sanitizeString(t,n)||ft.NotSpecified,l.value=i,u.metrics=[l],u.properties=st.sanitizeProperties(t,s),u.measurements=st.sanitizeMeasurements(t,c),u}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(Pt),jt=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return a(t,e),t}(Et),qt=function(e){function t(t,n,i,r,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:Qe.Required,name:Qe.Default,url:Qe.Default,duration:Qe.Default,properties:Qe.Default,measurements:Qe.Default,id:Qe.Default},c.id=st.sanitizeId(t,s),c.url=st.sanitizeUrl(t,i),c.name=st.sanitizeString(t,n)||ft.NotSpecified,isNaN(r)||(c.duration=ft.msToTimeSpan(r)),c.properties=st.sanitizeProperties(t,o),c.measurements=st.sanitizeMeasurements(t,a),c}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(jt),Ft=function(e){function t(t,n,i,r,o,a,s,c,u,l,p,f){void 0===u&&(u="Ajax");var d=e.call(this)||this;d.aiDataContract={id:Qe.Required,ver:Qe.Required,name:Qe.Default,resultCode:Qe.Default,duration:Qe.Default,success:Qe.Default,data:Qe.Default,target:Qe.Default,type:Qe.Default,properties:Qe.Default,measurements:Qe.Default,kind:Qe.Default,value:Qe.Default,count:Qe.Default,min:Qe.Default,max:Qe.Default,stdDev:Qe.Default,dependencyKind:Qe.Default,dependencySource:Qe.Default,commandName:Qe.Default,dependencyTypeName:Qe.Default},d.id=n,d.duration=ft.msToTimeSpan(o),d.success=a,d.resultCode=s+"",d.type=st.sanitizeString(t,u);var h=gt.ParseDependencyPath(t,i,c,r);return d.data=st.sanitizeUrl(t,r)||h.data,d.target=st.sanitizeString(t,h.target),l&&(d.target=d.target+" | "+l),d.name=st.sanitizeString(t,h.name),d.properties=st.sanitizeProperties(t,p),d.measurements=st.sanitizeMeasurements(t,f),d}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return a(t,e),t}(wt)),zt=function(e){function t(t,n,i,r,o){var a=e.call(this)||this;return a.aiDataContract={ver:Qe.Required,message:Qe.Required,severityLevel:Qe.Default,properties:Qe.Default},n=n||ft.NotSpecified,a.message=st.sanitizeMessage(t,n),a.properties=st.sanitizeProperties(t,r),a.measurements=st.sanitizeMeasurements(t,o),i&&(a.severityLevel=i),a}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return a(t,e),t}(wt)),Ht=function(e){function t(t,n,i,r,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:Qe.Required,name:Qe.Default,url:Qe.Default,duration:Qe.Default,perfTotal:Qe.Default,networkConnect:Qe.Default,sentRequest:Qe.Default,receivedResponse:Qe.Default,domProcessing:Qe.Default,properties:Qe.Default,measurements:Qe.Default},c.url=st.sanitizeUrl(t,i),c.name=st.sanitizeString(t,n)||ft.NotSpecified,c.properties=st.sanitizeProperties(t,o),c.measurements=st.sanitizeMeasurements(t,a),s&&(c.domProcessing=s.domProcessing,c.duration=s.duration,c.networkConnect=s.networkConnect,c.perfTotal=s.perfTotal,c.receivedResponse=s.receivedResponse,c.sentRequest=s.sentRequest),c}return a(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return a(t,e),t}(jt)),Vt=function(e){function t(t,n){var i=e.call(this)||this;return i.aiDataContract={baseType:Qe.Required,baseData:Qe.Required},i.baseType=t,i.baseData=n,i}return a(t,e),t}(Tt);!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(Mt||(Mt={}));var Bt=function(){function e(){}return e.getConfig=function(e,t,n,i){var r;return void 0===i&&(i=!1),r=n&&e.extensionConfig&&e.extensionConfig[n]&&!x.isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],x.isNullOrUndefined(r)?i:r},e}(),Gt=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"},Wt=function(){function e(){}return e.create=function(e,t,n,i,r,o){if(n=st.sanitizeString(i,n)||ft.NotSpecified,x.isNullOrUndefined(e)||x.isNullOrUndefined(t)||x.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var a={name:n,time:x.toISOString(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};if(!x.isNullOrUndefined(r))for(var s in r)r.hasOwnProperty(s)&&(a.data[s]=r[s]);return a},e}(),Kt=function(){function e(){}return e.UserExt="user",e.DeviceExt="device",e.TraceExt="trace",e.WebExt="web",e.AppExt="app",e.OSExt="os",e.SessionExt="ses",e.SDKExt="sdk",e}(),Xt=new Gt,Yt="AppInsightsPropertiesPlugin",Jt="AppInsightsChannelPlugin",Qt="ApplicationInsightsAnalytics";function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * Microsoft Dynamic Proto Utility, 0.5.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var $t=0;function en(e,t){return e&&Object.prototype.hasOwnProperty.call(e,t)}function tn(e){return"function"===Zt(e)}function nn(e){return e&&(e===Object.prototype||e===Array.prototype)}function rn(e){return nn(e)||e===Function.prototype}function on(e){if(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if(nn(e.__proto__))return e.__proto__;var t=e.constructor;if(t)return t.prototype}return null}function an(e,t){return"constructor"!==t&&tn(e[t])&&en(e,t)}function sn(e){throw new TypeError("DynamicProto: "+e)}function cn(e,t){return en(e,"prototype")?e.name||t||"_unknown_":((e||{}).constructor||{}).name||t||"_unknown_"}var un=function(e,t,n){en(e,"prototype")||sn("theClass is an invalid class definition.");var i=e.prototype;(function(e,t){for(var n=on(t);n&&!rn(n);){if(n===e)return!0;n=on(n)}return!1})(i,t)||sn("["+cn(e)+"] is not in class heirarchy of ["+cn(t)+"]");var r=null;en(i,"_dynClass")?r=i._dynClass:(r="_dynCls$"+cn(e,"_")+"$"+$t,$t++,i._dynClass=r);var o=function(e){var t={};for(var n in e)!t[n]&&an(e,n)&&(t[n]=e[n]);return t}(t);n(t,function(e,t,n){function i(e,t){return function(){return t.apply(e,arguments)}}var r={};for(var o in n)r[o]=i(t,n[o]);for(var a=on(e);a&&!rn(a);){for(var o in a)!r[o]&&an(a,o)&&(r[o]=i(t,a[o]));a=on(a)}return r}(i,t,o)),function(e,t,n,i){function r(e,t){var n=function n(){var i=this;if(i&&en(e,"_dynClass")){var r=((i._dynInstFuncs||{})[e._dynClass]||{})[t];if(r)return r.apply(i,arguments);sn("Missing ["+t+"] function")}var o=e[t];return o===n&&(o=on(e)[t]),tn(o)||sn("["+t+"] is not a function"),o.apply(i,arguments)};return n._isDynProxy=1,n}if(!nn(e)){var o=n._dynInstFuncs=n._dynInstFuncs||{},a=o[t]=o[t]||{};for(var s in n)an(n,s)&&n[s]!==i[s]&&(a[s]=n[s],delete n[s],(!en(e,s)||e[s]&&!e[s]._isDynProxy)&&(e[s]=r(e,s)))}}(i,r,t,o)},ln=function e(t,n,i,r){un(e,this,(function(e){var o,a=x.arrForEach,s=x.isNullOrUndefined,u=null,l=[],p=!1;function f(){i&&a(i.getTransmissionControls(),(function(e){a(e,(function(e){return e.flush(!0)}))}))}i&&(o=i.logger),e.trackPageView=function(e,i){var d=e.name;if(s(d)||"string"!=typeof d){var h=Object(c.a)();d=e.name=h&&h.title||""}var g=e.uri;if(s(g)||"string"!=typeof g){var m=Object(c.f)();g=e.uri=m&&m.href||""}if(!r.isPerformanceTimingSupported())return t.sendPageViewInternal(e,i),f(),void o.throwInternal(y.WARNING,W,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var v,x,I,b=!1,_=r.getPerformanceTiming().navigationStart;v=mt.GetDuration(_,+new Date),r.shouldCollectDuration(v)||(v=void 0),s(i)||s(i.duration)||(x=i.duration),!n&&isNaN(x)||(isNaN(x)&&(i||(i={}),i.duration=v),t.sendPageViewInternal(e,i),f(),b=!0),i||(i={}),I=function(){var n=!1;try{if(r.isPerformanceTimingDataReady()){n=!0;var a={name:d,uri:g};r.populatePageViewPerformanceEvent(a),a.isValid||b?(b||(i.duration=a.durationMs,t.sendPageViewInternal(e,i)),p||(t.sendPageViewPerformanceInternal(a,i),p=!0)):(i.duration=v,t.sendPageViewInternal(e,i))}else mt.GetDuration(_,+new Date)>6e4&&(n=!0,b||(i.duration=6e4,t.sendPageViewInternal(e,i)))}catch(e){o.throwInternal(y.CRITICAL,re,"trackPageView failed on page load calculation: "+ft.getExceptionName(e),{exception:ft.dump(e)})}return n},l.push(I),u||(u=setInterval((function(){var e=l.slice(0),t=!1;l=[],a(e,(function(e){e()?t=!0:l.push(e)})),0===l.length&&(clearInterval(u),u=null),t&&f()}),100))}}))},pn=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+ft.dump(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+ft.dump(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(ft.canUseSessionStorage()){if(null!=ft.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new fn(e,t),i=Object(c.e)().stringify(n);ft.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,i)}}catch(e){this._logger.warnToConsole("Call to start failed: "+ft.dump(e))}},e.prototype.stopPageVisitTimer=function(){try{if(ft.canUseSessionStorage()){var e=Date.now(),t=ft.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&Object(c.k)()){var n=Object(c.e)().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,ft.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+ft.dump(e)),null}},e}(),fn=function(e,t){this.pageVisitStartTime=Date.now(),this.pageName=e,this.pageUrl=t},dn=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming();if(t||n){if(t)var i=t.duration,r=mt.GetDuration(t.startTime,t.connectEnd),o=mt.GetDuration(t.requestStart,t.responseStart),a=mt.GetDuration(t.responseStart,t.responseEnd),s=mt.GetDuration(t.responseEnd,t.loadEventEnd);else i=mt.GetDuration(n.navigationStart,n.loadEventEnd),r=mt.GetDuration(n.navigationStart,n.connectEnd),o=mt.GetDuration(n.requestStart,n.responseStart),a=mt.GetDuration(n.responseStart,n.responseEnd),s=mt.GetDuration(n.responseEnd,n.loadEventEnd);0===i?this._logger.throwInternal(y.WARNING,L,"error calculating page view performance.",{total:i,network:r,request:o,response:a,dom:s}):this.shouldCollectDuration(i,r,o,a,s)?i<Math.floor(r)+Math.floor(o)+Math.floor(a)+Math.floor(s)?this._logger.throwInternal(y.WARNING,A,"client performance math error.",{total:i,network:r,request:o,response:a,dom:s}):(e.durationMs=i,e.perfTotal=e.duration=ft.msToTimeSpan(i),e.networkConnect=ft.msToTimeSpan(r),e.sentRequest=ft.msToTimeSpan(o),e.receivedResponse=ft.msToTimeSpan(a),e.domProcessing=ft.msToTimeSpan(s),e.isValid=!0):this._logger.throwInternal(y.WARNING,le,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:r,request:o,response:a,dom:s})}},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Object(c.h)().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Object(c.h)().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=Object(c.h)();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=Object(c.h)();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=Object(c.h)(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(c.g)()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=n.userAgent,o=!1;if(r)for(var a=0;a<i.length;a++)o=o||-1!==r.toLowerCase().indexOf(i[a]);if(o)return!1;for(a=0;a<e.length;a++)if(e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}();
/*!
 * Application Insights JavaScript SDK - Web Analytics, 2.5.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */function hn(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var gn=function(e){function t(){var t=e.call(this)||this;t.identifier=Qt,t.priority=180,t.autoRoutePVDelay=500,t._trackAjaxAttempts=0;var n=Object(c.f)();return t._prevUri=n&&n.href||"",t}return a(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=ft.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=ft.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=ft.stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=ft.stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isCookieUseDisabled=ft.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=ft.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=ft.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=ft.stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e},t.prototype.processTelemetry=function(e,t){var n=!1,i=this._telemetryInitializers.length;t=this._getTelCtx(t);for(var r=0;r<i;++r){var o=this._telemetryInitializers[r];if(o)try{if(!1===o.apply(null,[e])){n=!0;break}}catch(e){t.diagLog().throwInternal(y.CRITICAL,we,"One of telemetry initializers failed, telemetry item will not be sent: "+ft.getExceptionName(e),{exception:ft.dump(e)},!0)}}n||this.processNext(e,t)},t.prototype.trackEvent=function(e,t){try{var n=Wt.create(e,Dt.dataType,Dt.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(y.WARNING,oe,"trackTrace failed, trace will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(e){this.diagLog().throwInternal(y.CRITICAL,J,"startTrackEvent failed, event will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.stopTrackEvent=function(e,t,n){try{this._eventTracking.stop(e,void 0,t)}catch(e){this.diagLog().throwInternal(y.CRITICAL,Q,"stopTrackEvent failed, event will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.trackTrace=function(e,t){try{var n=Wt.create(e,zt.dataType,zt.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(y.WARNING,oe,"trackTrace failed, trace will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.trackMetric=function(e,t){try{var n=Wt.create(e,Ut.dataType,Ut.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(y.CRITICAL,ne,"trackMetric failed, metric will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.trackPageView=function(e,t){try{var n=e||{};this._pageViewManager.trackPageView(n,s({},n.properties,n.measurements,t)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(e){this.diagLog().throwInternal(y.CRITICAL,ie,"trackPageView failed, page view will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.sendPageViewInternal=function(e,t,n){var i=Object(c.a)();i&&(e.refUri=void 0===e.refUri?i.referrer:e.refUri);var r=Wt.create(e,qt.dataType,qt.envelopeType,this.diagLog(),t,n);this.core.track(r),this._trackAjaxAttempts=0},t.prototype.sendPageViewPerformanceInternal=function(e,t,n){var i=Wt.create(e,Ht.dataType,Ht.envelopeType,this.diagLog(),t,n);this.core.track(i)},t.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(e){this.diagLog().throwInternal(y.CRITICAL,ie,"trackPageViewPerformance failed, page view will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.startTrackPage=function(e){try{if("string"!=typeof e){var t=Object(c.a)();e=t&&t.title||""}this._pageTracking.start(e)}catch(e){this.diagLog().throwInternal(y.CRITICAL,Z,"startTrackPage failed, page view may not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.stopTrackPage=function(e,t,n,i){try{if("string"!=typeof e){var r=Object(c.a)();e=r&&r.title||""}if("string"!=typeof t){var o=Object(c.f)();t=o&&o.href||""}this._pageTracking.stop(e,t,n,i),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(e){this.diagLog().throwInternal(y.CRITICAL,$,"stopTrackPage failed, page view will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.sendExceptionInternal=function(e,t,n){var i=new kt(this.diagLog(),e.exception||new Error(ft.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),r=Wt.create(i,kt.dataType,kt.envelopeType,this.diagLog(),t,n);this.core.track(r)},t.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(e){this.diagLog().throwInternal(y.CRITICAL,te,"trackException failed, exception will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype._onerror=function(e){try{var t={url:e&&e.url||(Object(c.a)()||{}).URL,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:e.message};if(ft.isCrossOriginError(e.message,e.url,e.lineNumber,e.columnNumber,e.error))this._sendCORSException(t.url);else{if(!ft.isError(e.error)){var n="window.onerror@"+t.url+":"+e.lineNumber+":"+(e.columnNumber||0);e.error=new Error(e.message),e.error.stack=n}this.trackException({exception:e.error,severityLevel:Mt.Error},t)}}catch(t){var i=e.error?e.error.name+", "+e.error.message:"null";this.diagLog().throwInternal(y.CRITICAL,R,"_onError threw exception while logging error, error will not be collected: "+ft.getExceptionName(t),{exception:ft.dump(t),errorString:i})}},t.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype.initialize=function(n,i,r,o){var a=this;if(!this.isInitialized()){if(x.isNullOrUndefined(i))throw Error("Error initializing");e.prototype.initialize.call(this,n,i,r,o),this.setInitialized(!1);var s=this._getTelCtx(),u=this.identifier;this._globalconfig={instrumentationKey:n.instrumentationKey,endpointUrl:n.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=s.getExtCfg(u);var l=t.getDefaultConfig();if(void 0!==l){for(var p in l)this.config[p]=s.getConfig(u,p,l[p]);if(this._globalconfig)for(var p in l)void 0===this._globalconfig[p]&&(this._globalconfig[p]=l[p])}this.config.isCookieUseDisabled&&ft.disableCookies(),this.config.isStorageUseDisabled&&ft.disableStorage();var f={instrumentationKey:function(){return n.instrumentationKey},accountId:function(){return a.config.accountId||n.accountId},sessionRenewalMs:function(){return a.config.sessionRenewalMs||n.sessionRenewalMs},sessionExpirationMs:function(){return a.config.sessionExpirationMs||n.sessionExpirationMs},sampleRate:function(){return a.config.samplingPercentage||n.samplingPercentage},cookieDomain:function(){return a.config.cookieDomain||n.cookieDomain},sdkExtension:function(){return a.config.sdkExtension||n.sdkExtension},isBrowserLinkTrackingEnabled:function(){return a.config.isBrowserLinkTrackingEnabled||n.isBrowserLinkTrackingEnabled},appId:function(){return a.config.appId||n.appId}};this._pageViewPerformanceManager=new dn(this.core),this._pageViewManager=new ln(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new pn(this.diagLog(),(function(e,t,n){return a.trackPageVisitTime(e,t,n)})),this._telemetryInitializers=this._telemetryInitializers||[],this._addDefaultTelemetryInitializers(f),this._eventTracking=new mn(this.diagLog(),"trackEvent"),this._eventTracking.action=function(e,t,n,i){i||(i={}),i.duration=n.toString(),a.trackEvent({name:e,properties:i})},this._pageTracking=new mn(this.diagLog(),"trackPageView"),this._pageTracking.action=function(e,t,n,i,r){x.isNullOrUndefined(i)&&(i={}),i.duration=n.toString();var o={name:e,uri:t,properties:i,measurements:r};a.sendPageViewInternal(o,i)};var d,h=Object(c.i)(),g=Object(c.d)(),m=Object(c.f)(),v=this;if(!1===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented&&h){var y=h.onerror;h.onerror=function(e,t,n,i,r){var o=y&&y(e,t,n,i,r);return!0!==o&&v._onerror({message:e,url:t,lineNumber:n,columnNumber:i,error:r}),o},this.config.autoExceptionInstrumented=!0}if(!1===this.config.disableExceptionTracking&&!0===this.config.enableUnhandledPromiseRejectionTracking&&!this.config.autoUnhandledPromiseInstrumented&&h){var I=h.onunhandledrejection;h.onunhandledrejection=function(e){var t=I&&I.call(h,e);return!0!==t&&v._onerror({message:e.reason.toString(),error:e.reason instanceof Error?e.reason:new Error(e.reason.toString()),url:m?m.href:"",lineNumber:0,columnNumber:0}),t},this.config.autoUnhandledPromiseInstrumented=!0}if(!0===this.config.enableAutoRouteTracking&&g&&x.isFunction(g.pushState)&&x.isFunction(g.replaceState)&&h&&"undefined"!=typeof Event){var b=this;x.arrForEach(r,(function(e){e.identifier===Yt&&(a._properties=e)})),g.pushState=(d=g.pushState,function(){var e=d.apply(this,arguments);return hn(h,ft.createDomEvent(b.config.namePrefix+"pushState")),hn(h,ft.createDomEvent(b.config.namePrefix+"locationchange")),e}),g.replaceState=function(e){return function(){var t=e.apply(this,arguments);return hn(h,ft.createDomEvent(b.config.namePrefix+"replaceState")),hn(h,ft.createDomEvent(b.config.namePrefix+"locationchange")),t}}(g.replaceState),h.addEventListener&&(h.addEventListener(b.config.namePrefix+"popstate",(function(){hn(h,ft.createDomEvent(b.config.namePrefix+"locationchange"))})),h.addEventListener(b.config.namePrefix+"locationchange",(function(){b._properties&&b._properties.context&&b._properties.context.telemetryTrace&&(b._properties.context.telemetryTrace.traceID=ft.generateW3CId(),b._properties.context.telemetryTrace.name=m&&m.pathname||"_unknown_"),a._currUri?(a._prevUri=a._currUri,a._currUri=m&&m.href||""):a._currUri=m&&m.href||"",setTimeout(function(e){b.trackPageView({refUri:e,properties:{duration:0}})}.bind(a,a._prevUri),b.autoRoutePVDelay)})))}this.setInitialized(!0)}},t.prototype.trackPageVisitTime=function(e,t,n){var i={PageName:e,PageUrl:t};this.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},i)},t.prototype._addDefaultTelemetryInitializers=function(e){if(!e.isBrowserLinkTrackingEnabled()){var t=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer((function(e){if(e.baseType===Ft.dataType){var n=e.baseData;if(n)for(var i=0;i<t.length;i++)if(n.target&&n.target.indexOf(t[i])>=0)return!1}return!0}))}},t.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:void 0},n=Wt.create(t,kt.dataType,kt.envelopeType,this.diagLog(),{url:e});this.core.track(n)},t.Version="2.5.2",t}(Ve),mn=function(){function e(e,t){this._name=t,this._events={},this._logger=e}return e.prototype.start=function(e){void 0!==this._events[e]&&this._logger.throwInternal(y.WARNING,Te,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},e.prototype.stop=function(e,t,n,i){var r=this._events[e];if(isNaN(r))this._logger.throwInternal(y.WARNING,Ce,"stop was called without a corresponding start.",{name:this._name,key:e},!0);else{var o=+new Date,a=mt.GetDuration(r,o);this.action(e,t,a,n,i)}delete this._events[e],this._events[e]=void 0},e}(),vn=function(){function e(e){this._config=e,this._buffer=[]}return e.prototype.enqueue=function(e){this._buffer.push(e)},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(e){this.clear()},e.prototype.clearSent=function(e){},e}(),yn=function(){function e(t,n){this._bufferFullMessageSent=!1,this._logger=t,this._config=n;var i=this.getBuffer(e.BUFFER_KEY),r=this.getBuffer(e.SENT_BUFFER_KEY);this._buffer=i.concat(r),this._buffer.length>e.MAX_BUFFER_SIZE&&(this._buffer.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,[]),this.setBuffer(e.BUFFER_KEY,this._buffer)}return e.prototype.enqueue=function(t){this._buffer.length>=e.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._logger.throwInternal(y.WARNING,De,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(e.BUFFER_KEY,this._buffer))},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0,this.setBuffer(e.BUFFER_KEY,[]),this.setBuffer(e.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(t){this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(e.BUFFER_KEY,this._buffer);var n=this.getBuffer(e.SENT_BUFFER_KEY);n instanceof Array&&t instanceof Array&&((n=n.concat(t)).length>e.MAX_BUFFER_SIZE&&(this._logger.throwInternal(y.CRITICAL,De,"Sent buffer reached its maximum size: "+n.length,!0),n.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,n))},e.prototype.clearSent=function(t){var n=this.getBuffer(e.SENT_BUFFER_KEY);n=this.removePayloadsFromBuffer(t,n),this.setBuffer(e.SENT_BUFFER_KEY,n)},e.prototype.removePayloadsFromBuffer=function(e,t){var n=[];for(var i in t){var r=!1;for(var o in e)if(e[o]===t[i]){r=!0;break}r||n.push(t[i])}return n},e.prototype.getBuffer=function(e){var t=e;try{t=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+t:t;var n=ft.getSessionStorage(this._logger,t);if(n){var i=Object(c.e)().parse(n);if(i)return i}}catch(e){this._logger.throwInternal(y.CRITICAL,ce," storage key: "+t+", "+ft.getExceptionName(e),{exception:ft.dump(e)})}return[]},e.prototype.setBuffer=function(e,t){var n=e;try{n=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+n:n;var i=JSON.stringify(t);ft.setSessionStorage(this._logger,n,i)}catch(e){ft.setSessionStorage(this._logger,n,JSON.stringify([])),this._logger.throwInternal(y.WARNING,se," storage key: "+n+", "+ft.getExceptionName(e)+". Buffer cleared",{exception:ft.dump(e)})}},e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(),xn=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){if(!x.isNullOrUndefined(e))for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];x.isNumber(r)?n[i]=r:x.isString(r)?t[i]=r:Object(c.k)()&&(t[i]=Object(c.e)().stringify(r))}},e.createEnvelope=function(t,n,i,r){var o=new Ct(t,r,n);i[yt]&&(o.sampleRate=i[yt]),o.iKey=i.iKey;var a=i.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),e.extractPartAExtensions(i,o),i.tags||(i.tags=[]),o},e.extractPartAExtensions=function(t,n){if(n.tags||(n.tags={}),t.ext||(t.ext={}),t.tags||(t.tags=[]),t.ext.user){t.ext.user.authId&&(n.tags[Xt.userAuthUserId]=t.ext.user.authId);var i=t.ext.user.id||t.ext.user.localId;i&&(n.tags[Xt.userId]=i)}if(t.ext.app&&t.ext.app.sesId&&(n.tags[Xt.sessionId]=t.ext.app.sesId),t.ext.device&&((t.ext.device.id||t.ext.device.localId)&&(n.tags[Xt.deviceId]=t.ext.device.id||t.ext.device.localId),t.ext.device.deviceClass&&(n.tags[Xt.deviceType]=t.ext.device.deviceClass),t.ext.device.ip&&(n.tags[Xt.deviceIp]=t.ext.device.ip)),t.ext.web){var r=t.ext.web;r.browserLang&&(n.tags[Xt.deviceLanguage]=r.browserLang),r.browserVer&&(n.tags[Xt.deviceBrowserVersion]=r.browserVer),r.browser&&(n.tags[Xt.deviceBrowser]=r.browser),n.data=n.data||{},n.data.baseData=n.data.baseData||{},n.data.baseData.properties=n.data.baseData.properties||{},r.domain&&(n.data.baseData.properties.domain=r.domain),r.isManual&&(n.data.baseData.properties.isManual=r.isManual.toString()),r.screenRes&&(n.data.baseData.properties.screenRes=r.screenRes),r.userConsent&&(n.data.baseData.properties.userConsent=r.userConsent.toString())}t.ext.device&&t.ext.device.model&&(n.tags[Xt.deviceModel]=t.ext.device.model),t.ext.os&&t.ext.os.name&&(n.tags[Xt.deviceOS]=t.ext.os.name),t.ext.device&&t.ext.device.deviceType&&(n.tags[Xt.deviceType]=t.ext.device.deviceType),t.ext.trace&&(t.ext.trace.parentID&&(n.tags[Xt.operationParentId]=t.ext.trace.parentID),t.ext.trace.name&&(n.tags[Xt.operationName]=t.ext.trace.name),t.ext.trace.traceID&&(n.tags[Xt.operationId]=t.ext.trace.traceID));for(var o={},a=function(e){var n=t.tags[e];x.arrForEach(x.objKeys(n),(function(e){o[e]=n[e]})),t.tags.splice(e,1)},c=t.tags.length-1;c>=0;c--)a(c);for(var u in t.tags)o[u]=t.tags[u];n.tags=s({},n.tags,o),n.tags[Xt.internalSdkVersion]||(n.tags[Xt.internalSdkVersion]="javascript:"+e.Version)},e.Version="2.5.2",e}(),In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n=t.baseData.measurements||{},i=t.baseData.properties||{};xn.extractPropsAndMeasurements(t.data,i,n);var r=t.baseData;if(x.isNullOrUndefined(r))return e.warnToConsole("Invalid input for dependency data"),null;var o=r.id,a=r.target,s=r.name,c=r.duration,u=r.success,l=r.responseCode,p=r.type,f=r.correlationContext,d=r.properties&&r.properties[It]?r.properties[It]:"GET",h=new Ft(e,o,a,s,c,u,l,d,p,f,i,n),g=new Vt(Ft.dataType,h);return xn.createEnvelope(e,Ft.envelopeType,t,g)},t.DependencyEnvelopeCreator=new t,t}(xn),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n={},i={};t.baseType!==Dt.dataType&&(n.baseTypeSource=t.baseType),t.baseType===Dt.dataType?(n=t.baseData.properties||{},i=t.baseData.measurements||{}):t.baseData&&xn.extractPropsAndMeasurements(t.baseData,n,i),xn.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,o=new Dt(e,r,n,i),a=new Vt(Dt.dataType,o);return xn.createEnvelope(e,Dt.envelopeType,t,a)},t.EventEnvelopeCreator=new t,t}(xn),_n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=kt.CreateFromInterface(e,n),r=new Vt(kt.dataType,i);return xn.createEnvelope(e,kt.envelopeType,t,r)},t.ExceptionEnvelopeCreator=new t,t}(xn),Sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n=t.baseData.properties||{},i=t.baseData.measurements||{};xn.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,o=t.baseData.average,a=t.baseData.sampleCount,s=t.baseData.min,c=t.baseData.max,u=new Ut(e,r,o,a,s,c,n,i),l=new Vt(Ut.dataType,u);return xn.createEnvelope(e,Ut.envelopeType,t,l)},t.MetricEnvelopeCreator=new t,t}(xn),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){var n;this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null."),x.isNullOrUndefined(t.baseData)||x.isNullOrUndefined(t.baseData.properties)||x.isNullOrUndefined(t.baseData.properties.duration)?x.isNullOrUndefined(t.data)||x.isNullOrUndefined(t.data.duration)||(n=t.data.duration,delete t.data.duration):(n=t.baseData.properties.duration,delete t.baseData.properties.duration);var i,r=t.baseData;t.ext&&t.ext.trace&&t.ext.trace.traceID&&(i=t.ext.trace.traceID);var o=r.id||i,a=r.name,s=r.uri,c=r.properties||{},u=r.measurements||{};if(x.isNullOrUndefined(r.refUri)||(c.refUri=r.refUri),x.isNullOrUndefined(r.pageType)||(c.pageType=r.pageType),x.isNullOrUndefined(r.isLoggedIn)||(c.isLoggedIn=r.isLoggedIn.toString()),!x.isNullOrUndefined(r.properties)){var l=r.properties;for(var p in l)l.hasOwnProperty(p)&&(c[p]=l[p])}xn.extractPropsAndMeasurements(t.data,c,u);var f=new qt(e,a,s,n,c,u,o),d=new Vt(qt.dataType,f);return xn.createEnvelope(e,qt.envelopeType,t,d)},t.PageViewEnvelopeCreator=new t,t}(xn),Cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=n.name,r=n.uri||n.url,o=n.properties||{},a=n.measurements||{};xn.extractPropsAndMeasurements(t.data,o,a);var s=new Ht(e,i,r,void 0,o,a,n),c=new Vt(Ht.dataType,s);return xn.createEnvelope(e,Ht.envelopeType,t,c)},t.PageViewPerformanceEnvelopeCreator=new t,t}(xn),wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.Create=function(e,t){this._logger=e,x.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(y.CRITICAL,pe,"telemetryItem.baseData cannot be null.");var n=t.baseData.message,i=t.baseData.severityLevel,r=t.baseData.properties||{},o=t.baseData.measurements||{};xn.extractPropsAndMeasurements(t.data,r,o);var a=new zt(e,n,i,r,o),s=new Vt(zt.dataType,a);return xn.createEnvelope(e,zt.envelopeType,t,s)},t.TraceEnvelopeCreator=new t,t}(xn),En=function(){function e(e){this._logger=e}return e.prototype.serialize=function(e){var t=this._serializeObject(e,"root");try{return Object(c.e)().stringify(t)}catch(e){this._logger.throwInternal(y.CRITICAL,de,e&&x.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}},e.prototype._serializeObject=function(e,t){var n={};if(!e)return this._logger.throwInternal(y.CRITICAL,de,"cannot serialize object because it is null or undefined",{name:t},!0),n;if(e.__aiCircularRefCheck)return this._logger.throwInternal(y.WARNING,ge,"Circular reference detected while serializing object",{name:t},!0),n;if(!e.aiDataContract){if("measurements"===t)n=this._serializeStringMap(e,"number",t);else if("properties"===t)n=this._serializeStringMap(e,"string",t);else if("tags"===t)n=this._serializeStringMap(e,"string",t);else if(ft.isArray(e))n=this._serializeArray(e,t);else{this._logger.throwInternal(y.WARNING,he,"Attempting to serialize an object which does not implement ISerializable",{name:t},!0);try{Object(c.e)().stringify(e),n=e}catch(e){this._logger.throwInternal(y.CRITICAL,de,e&&x.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}}return n}for(var i in e.__aiCircularRefCheck=!0,e.aiDataContract){var r=e.aiDataContract[i],o=x.isFunction(r)?r()&Qe.Required:r&Qe.Required,a=x.isFunction(r)?r()&Qe.Hidden:r&Qe.Hidden,s=r&Qe.Array,u=void 0!==e[i],l=x.isObject(e[i])&&null!==e[i];if(!o||u||s){if(!a){var p=void 0;void 0!==(p=l?s?this._serializeArray(e[i],i):this._serializeObject(e[i],i):e[i])&&(n[i]=p)}}else this._logger.throwInternal(y.CRITICAL,G,"Missing required field specification. The field is required but not present on source",{field:i,name:t})}return delete e.__aiCircularRefCheck,n},e.prototype._serializeArray=function(e,t){var n;if(e)if(ft.isArray(e)){n=[];for(var i=0;i<e.length;i++){var r=e[i],o=this._serializeObject(r,t+"["+i+"]");n.push(o)}}else this._logger.throwInternal(y.CRITICAL,ve,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n},e.prototype._serializeStringMap=function(e,t,n){var i;if(e)for(var r in i={},e){var o=e[r];if("string"===t)void 0===o?i[r]="undefined":null===o?i[r]="null":o.toString?i[r]=o.toString():i[r]="invalid field: toString() is not defined.";else if("number"===t)if(void 0===o)i[r]="undefined";else if(null===o)i[r]="null";else{var a=parseFloat(o);isNaN(a)?i[r]="NaN":i[r]=a}else i[r]="invalid field: "+n+" is of unknown type.",this._logger.throwInternal(y.CRITICAL,i[r],null,!0)}return i},e}(),Dn=function(){function e(){this._onlineStatus=!0;var e=Object(c.i)(),t=Object(c.a)(),n=!1;try{if(e&&b.Attach(e,"online",this._setOnline.bind(this))&&(b.Attach(e,"offline",this._setOffline.bind(this)),n=!0),t){var i=t.body||t;x.isUndefined(i.ononline)||(i.ononline=this._setOnline.bind(this),i.onoffline=this._setOffline.bind(this),n=!0)}}catch(e){n=!1}this.isListening=n}return e.prototype.isOnline=function(){var e=Object(c.g)();return this.isListening?this._onlineStatus:!(e&&!x.isNullOrUndefined(e.onLine))||e.onLine},e.prototype.isOffline=function(){return!this.isOnline()},e.prototype._setOnline=function(){this._onlineStatus=!0},e.prototype._setOffline=function(){this._onlineStatus=!1},e.Offline=new e,e}().Offline,Nn=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,i=0;i<t.length;++i)n=(n<<5)+n+t.charCodeAt(i),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}(),An=function(){function e(){this.hashCodeGeneragor=new Nn,this.keys=new Gt}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}(),kn=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=x.isNullOrUndefined(t)?new Oe:t,(e>100||e<0)&&(this._logger.throwInternal(y.WARNING,be,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new An}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||(e.baseType===Ut.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t)},e}();function Ln(e){try{return e.responseText}catch(e){}return null}var Rn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=1001,t.identifier=Jt,t._XMLHttpRequestSupported=!1,t}return a(t,e),t.constructEnvelope=function(e,t,n){var i;switch((i=t===e.iKey||x.isNullOrUndefined(t)?e:s({},e,{iKey:t})).baseType){case Dt.dataType:return bn.EventEnvelopeCreator.Create(n,i);case zt.dataType:return wn.TraceEnvelopeCreator.Create(n,i);case qt.dataType:return Tn.PageViewEnvelopeCreator.Create(n,i);case Ht.dataType:return Cn.PageViewPerformanceEnvelopeCreator.Create(n,i);case kt.dataType:return _n.ExceptionEnvelopeCreator.Create(n,i);case Ut.dataType:return Sn.MetricEnvelopeCreator.Create(n,i);case Ft.dataType:return In.DependencyEnvelopeCreator.Create(n,i);default:return bn.EventEnvelopeCreator.Create(n,i)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0}},t.prototype.pause=function(){throw new Error("Method not implemented.")},t.prototype.resume=function(){throw new Error("Method not implemented.")},t.prototype.flush=function(){try{this.triggerSend()}catch(e){this.diagLog().throwInternal(y.CRITICAL,V,"flush failed, telemetry will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.onunloadFlush=function(){if(!1!==this._senderConfig.onunloadDisableBeacon()&&!1!==this._senderConfig.isBeaconApiDisabled()||!ft.IsBeaconApiSupported())this.flush();else try{this.triggerSend(!0,this._beaconSender)}catch(e){this.diagLog().throwInternal(y.CRITICAL,H,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype.teardown=function(){throw new Error("Method not implemented.")},t.prototype.initialize=function(n,i,r,o){e.prototype.initialize.call(this,n,i,r,o);var a=this._getTelCtx(),s=this.identifier;this._serializer=new En(i.logger),this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._sender=null;var c=t._getDefaultAppInsightsChannelConfig();this._senderConfig=t._getEmptyAppInsightsChannelConfig();var u=function(e){l._senderConfig[e]=function(){return a.getConfig(s,e,c[e]())}},l=this;for(var p in c)u(p);(this._buffer=this._senderConfig.enableSessionStorageBuffer&&ft.canUseSessionStorage()?new yn(this.diagLog(),this._senderConfig):new vn(this._senderConfig),this._sample=new kn(this._senderConfig.samplingPercentage(),this.diagLog()),!this._senderConfig.isBeaconApiDisabled()&&ft.IsBeaconApiSupported())?this._sender=this._beaconSender:x.isUndefined(XMLHttpRequest)||("withCredentials"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):x.isUndefined(XDomainRequest)||(this._sender=this._xdrSender))},t.prototype.processTelemetry=function(e,n){n=this._getTelCtx(n);try{if(this._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(y.CRITICAL,N,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(y.CRITICAL,ke,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!this._sender)return void n.diagLog().throwInternal(y.CRITICAL,Y,"Sender was not initialized");if(!this._isSampledIn(e))return void n.diagLog().throwInternal(y.WARNING,ee,"Telemetry item was sampled out and not sent",{SampleRate:this._sample.sampleRate});e[yt]=this._sample.sampleRate;var i=t.constructEnvelope(e,this._senderConfig.instrumentationKey(),n.diagLog());if(!i)return void n.diagLog().throwInternal(y.CRITICAL,fe,"Unable to create an AppInsights envelope");var r=!1;if(e.tags&&e.tags[xt]&&(x.arrForEach(e.tags[xt],(function(e){try{e&&!1===e(i)&&(r=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){n.diagLog().throwInternal(y.CRITICAL,we,"One of telemetry initializers failed, telemetry item will not be sent: "+ft.getExceptionName(e),{exception:ft.dump(e)},!0)}})),delete e.tags[xt]),r)return;var o=this._serializer.serialize(i),a=this._buffer.getItems(),s=this._buffer.batchPayloads(a);s&&s.length+o.length>this._senderConfig.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(o),this._setupTimer()}catch(e){n.diagLog().throwInternal(y.WARNING,P,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ft.getExceptionName(e),{exception:ft.dump(e)})}this.processNext(e,n)},t.prototype._xhrReadyStateChange=function(e,t,n){if(4===e.readyState){var i=null;if(this._appId||(i=this._parseResponse(Ln(e)||e.response))&&i.appId&&(this._appId=i.appId),(e.status<200||e.status>=300)&&0!==e.status)!this._senderConfig.isRetryDisabled()&&this._isRetriable(e.status)?(this._resendPayload(t),this.diagLog().throwInternal(y.WARNING,ae,". Response code "+e.status+". Will retry to send "+t.length+" items.")):this._onError(t,this._formatErrorMessageXhr(e));else if(Dn.isOffline()){if(!this._senderConfig.isRetryDisabled()){this._resendPayload(t,10),this.diagLog().throwInternal(y.WARNING,ae,". Offline - Response Code: "+e.status+". Offline status: "+Dn.isOffline()+". Will retry to send "+t.length+" items.")}}else 206===e.status?(i||(i=this._parseResponse(Ln(e)||e.response)),i&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,i):this._onError(t,this._formatErrorMessageXhr(e))):(this._consecutiveErrors=0,this._onSuccess(t,n))}},t.prototype.triggerSend=function(e,t){void 0===e&&(e=!0);try{if(this._senderConfig.disableTelemetry())this._buffer.clear();else{if(this._buffer.count()>0){var n=this._buffer.getItems();t?t.call(this,n,e):this._sender(n,e)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(e){(!ft.getIEVersion()||ft.getIEVersion()>9)&&this.diagLog().throwInternal(y.CRITICAL,ae,"Telemetry transmission failed, some telemetry will be lost: "+ft.getExceptionName(e),{exception:ft.dump(e)})}},t.prototype._onError=function(e,t,n){this.diagLog().throwInternal(y.WARNING,K,"Failed to send telemetry.",{message:t}),this._buffer.clearSent(e)},t.prototype._onPartialSuccess=function(e,t){for(var n=[],i=[],r=0,o=t.errors.reverse();r<o.length;r++){var a=o[r],s=e.splice(a.index,1)[0];this._isRetriable(a.statusCode)?i.push(s):n.push(s)}e.length>0&&this._onSuccess(e,t.itemsAccepted),n.length>0&&this._onError(n,this._formatErrorMessageXhr(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),i.length>0&&(this._resendPayload(i),this.diagLog().throwInternal(y.WARNING,ae,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+i.length+" our of "+t.itemsReceived+" items"))},t.prototype._onSuccess=function(e,t){this._buffer.clearSent(e)},t.prototype._xdrOnLoad=function(e,t){var n=Ln(e);if(!e||n+""!="200"&&""!==n){var i=this._parseResponse(n);i&&i.itemsReceived&&i.itemsReceived>i.itemsAccepted&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,i):this._onError(t,this._formatErrorMessageXdr(e))}else this._consecutiveErrors=0,this._onSuccess(t,0)},t.prototype._isSampledIn=function(e){return this._sample.isSampledIn(e)},t.prototype._beaconSender=function(e,t){var n=this._senderConfig.endpointUrl(),i=this._buffer.batchPayloads(e),r=new Blob([i],{type:"text/plain;charset=UTF-8"});Object(c.g)().sendBeacon(n,r)?(this._buffer.markAsSent(e),this._onSuccess(e,e.length)):(this._xhrSender(e,!0),this.diagLog().throwInternal(y.WARNING,ae,". Failed to send telemetry with Beacon API, retried with xhrSender."))},t.prototype._xhrSender=function(e,t){var n=this,i=new XMLHttpRequest,r=this._senderConfig.endpointUrl();try{i[vt]=!0}catch(e){}i.open("POST",r,t),i.setRequestHeader("Content-type","application/json"),ft.isInternalApplicationInsightsEndpoint(r)&&i.setRequestHeader(at.sdkContextHeader,at.sdkContextHeaderAppIdRequest),i.onreadystatechange=function(){return n._xhrReadyStateChange(i,e,e.length)},i.onerror=function(t){return n._onError(e,n._formatErrorMessageXhr(i),t)};var o=this._buffer.batchPayloads(e);i.send(o),this._buffer.markAsSent(e)},t.prototype._parseResponse=function(e){try{if(e&&""!==e){var t=Object(c.e)().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(t){this.diagLog().throwInternal(y.CRITICAL,ue,"Cannot parse the response. "+ft.getExceptionName(t),{response:e})}return null},t.prototype._resendPayload=function(e,t){if(void 0===t&&(t=1),e&&0!==e.length){this._buffer.clearSent(e),this._consecutiveErrors++;for(var n=0,i=e;n<i.length;n++){var r=i[n];this._buffer.enqueue(r)}this._setRetryTime(t),this._setupTimer()}},t.prototype._setRetryTime=function(e){var t;if(this._consecutiveErrors<=1)t=10;else{var n=(Math.pow(2,this._consecutiveErrors)-1)/2,i=Math.floor(Math.random()*n*10)+1;i*=e,t=Math.max(Math.min(i,3600),10)}var r=Date.now()+1e3*t;this._retryAt=r},t.prototype._setupTimer=function(){var e=this;if(!this._timeoutHandle){var t=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,n=Math.max(this._senderConfig.maxBatchInterval(),t);this._timeoutHandle=setTimeout((function(){e.triggerSend()}),n)}},t.prototype._isRetriable=function(e){return 408===e||429===e||500===e||503===e},t.prototype._formatErrorMessageXhr=function(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+Ln(e)||!1:t},t.prototype._xdrSender=function(e,t){var n=this,i=Object(c.i)(),r=new XDomainRequest;r.onload=function(){return n._xdrOnLoad(r,e)},r.onerror=function(t){return n._onError(e,n._formatErrorMessageXdr(r),t)};var o=i&&i.location&&i.location.protocol||"";if(0!==this._senderConfig.endpointUrl().lastIndexOf(o,0))return this.diagLog().throwInternal(y.WARNING,ae,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var a=this._senderConfig.endpointUrl().replace(/^(https?:)/,"");r.open("POST",a);var s=this._buffer.batchPayloads(e);r.send(s),this._buffer.markAsSent(e)},t.prototype._formatErrorMessageXdr=function(e,t){return e?"XDomainRequest,Response:"+Ln(e)||!1:t},t}(Ve),Pn=function(){},Mn=function(){function e(t,n){var i=this;x.isNullOrUndefined(n)?this._logger=new Oe:this._logger=n,t||(t={}),"function"!=typeof t.sessionExpirationMs&&(t.sessionExpirationMs=function(){return e.acquisitionSpan}),"function"!=typeof t.sessionRenewalMs&&(t.sessionRenewalMs=function(){return e.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return i.config.namePrefix&&i.config.namePrefix()?e.cookieNameConst+i.config.namePrefix():e.cookieNameConst},this.automaticSession=new Pn}return e.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=mt.Now(),n=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),i=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||i?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>e.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},e.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},e.prototype.initializeAutomaticSession=function(){var e=ft.getCookie(this._logger,this._storageNamePrefix());if(e&&"function"==typeof e.split)this.initializeAutomaticSessionWithData(e);else{var t=ft.getStorage(this._logger,this._storageNamePrefix());t&&this.initializeAutomaticSessionWithData(t)}this.automaticSession.id||this.renew()},e.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split("|");t.length>0&&(this.automaticSession.id=t[0]);try{if(t.length>1){var n=+t[1];this.automaticSession.acquisitionDate=+new Date(n),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(t.length>2){var i=+t[2];this.automaticSession.renewalDate=+new Date(i),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(e){this._logger.throwInternal(y.CRITICAL,k,"Error parsing ai_session cookie, session will be reset: "+ft.getExceptionName(e),{exception:ft.dump(e)})}0===this.automaticSession.renewalDate&&this._logger.throwInternal(y.WARNING,X,"AI session renewal date is 0, session will be reset.")},e.prototype.renew=function(){var e=mt.Now();this.automaticSession.id=ft.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),ft.canUseLocalStorage()||this._logger.throwInternal(y.WARNING,_,"Browser does not support local storage. Session durations will be inaccurate.")},e.prototype.setCookie=function(e,t,n){var i=t+this.config.sessionExpirationMs(),r=n+this.config.sessionRenewalMs(),o=new Date,a=[e,t,n];i<r?o.setTime(i):o.setTime(r);var s=this.config.cookieDomain?this.config.cookieDomain():null,c=0===this.config.sessionExpirationMs()?"0":o.toUTCString();ft.setCookie(this._logger,this._storageNamePrefix(),a.join("|")+";expires="+c,s),this.cookieUpdatedTimestamp=mt.Now()},e.prototype.setStorage=function(e,t,n){ft.setStorage(this._logger,this._storageNamePrefix(),[e,t,n].join("|"))},e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e.cookieNameConst="ai_session",e}(),On=function(){},Un=function(){this.id="browser",this.deviceClass="Browser"},jn=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.5.2"},qn=function(){function e(t,n){this.isNewUser=!1,this._logger=n;var i=ft.getCookie(this._logger,e.userCookieName);if(i){this.isNewUser=!1;var r=i.split(e.cookieSeparator);r.length>0&&(this.id=r[0])}if(this.config=t,!this.id){this.id=ft.newId();var o=new Date,a=x.toISOString(o);this.accountAcquisitionDate=a,this.isNewUser=!0,o.setTime(o.getTime()+31536e6);var s=[this.id,a],c=this.config.cookieDomain?this.config.cookieDomain():void 0;ft.setCookie(this._logger,e.userCookieName,s.join(e.cookieSeparator)+";expires="+o.toUTCString(),c);var u=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";ft.removeStorage(this._logger,u)}this.accountId=t.accountId?t.accountId():void 0;var l=ft.getCookie(this._logger,e.authUserCookieName);if(l){var p=(l=decodeURI(l)).split(e.cookieSeparator);p[0]&&(this.authenticatedId=p[0]),p.length>1&&p[1]&&(this.accountId=p[1])}}return e.prototype.setAuthenticatedUserContext=function(t,n,i){if(void 0===i&&(i=!1),!this.validateUserInput(t)||n&&!this.validateUserInput(n))this._logger.throwInternal(y.WARNING,_e,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=t;var r=this.authenticatedId;n&&(this.accountId=n,r=[this.authenticatedId,this.accountId].join(e.cookieSeparator)),i&&ft.setCookie(this._logger,e.authUserCookieName,encodeURI(r),this.config.cookieDomain())}},e.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,ft.deleteCookie(this._logger,e.authUserCookieName)},e.prototype.validateUserInput=function(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))},e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),Fn=function(){},zn=function(e,t,n,i){this.traceID=e||ft.generateW3CId(),this.parentID=t,this.name=n;var r=Object(c.f)();!n&&r&&r.pathname&&(this.name=r.pathname),this.name=st.sanitizeString(i,this.name)},Hn=function(){function e(e,t){Object(c.l)()&&(this.sessionManager=new Mn(t,e),this.application=new On,this.device=new Un,this.internal=new jn(t),this.location=new Fn,this.user=new qn(t,e),this.telemetryTrace=new zn(void 0,void 0,void 0,e),this.session=new Pn),this.appId=function(){return null}}return e.prototype.applySessionContext=function(e,t){var n=this.session||this.sessionManager&&this.sessionManager.automaticSession;n&&"string"==typeof n.id&&(e.ext.app.sesId=n.id),this.session&&("string"==typeof this.session.id?e.ext.app.sesId=this.session.id:e.ext.app.sesId=this.sessionManager.automaticSession.id)},e.prototype.applyOperatingSystemContxt=function(e,t){this.os&&this.os.name&&(e.ext.os=this.os)},e.prototype.applyApplicationContext=function(e,t){this.application&&("string"==typeof this.application.ver&&(e.tags[Xt.applicationVersion]=this.application.ver),"string"==typeof this.application.build&&(e.tags[Xt.applicationBuild]=this.application.build))},e.prototype.applyDeviceContext=function(e,t){this.device&&("string"==typeof this.device.id&&(e.ext.device.localId=this.device.id),"string"==typeof this.device.ip&&(e.ext.device.ip=this.device.ip),"string"==typeof this.device.model&&(e.ext.device.model=this.device.model),"string"==typeof this.device.deviceClass&&(e.ext.device.deviceClass=this.device.deviceClass))},e.prototype.applyInternalContext=function(e,t){this.internal&&("string"==typeof this.internal.agentVersion&&(e.tags[Xt.internalAgentVersion]=this.internal.agentVersion),"string"==typeof this.internal.sdkVersion&&(e.tags[Xt.internalSdkVersion]=this.internal.sdkVersion))},e.prototype.applyLocationContext=function(e,t){this.location&&"string"==typeof this.location.ip&&(e.tags[Xt.locationIp]=this.location.ip)},e.prototype.applyOperationContext=function(e,t){if(this.telemetryTrace){var n=e.ext.trace||{traceID:void 0,parentID:void 0};"string"==typeof this.telemetryTrace.traceID&&(n.traceID=this.telemetryTrace.traceID),"string"==typeof this.telemetryTrace.name&&(n.name=this.telemetryTrace.name),"string"==typeof this.telemetryTrace.parentID&&(n.parentID=this.telemetryTrace.parentID),e.ext.trace=n}},e.prototype.applyWebContext=function(e,t){this.web&&(e.ext.web=e.ext.web||{},e.ext.web=this.web)},e.prototype.applyUserContext=function(e,t){if(this.user){if(e.tags||(e.tags=[]),"string"==typeof this.user.accountId){e.tags[Xt.userAccountId]=this.user.accountId}"string"==typeof this.user.id&&(e.ext.user.id=this.user.id),"string"==typeof this.user.authenticatedId&&(e.ext.user.authId=this.user.authenticatedId)}},e.prototype.cleanUp=function(e,t){e.ext[Kt.DeviceExt]&&0===x.objKeys(e.ext[Kt.DeviceExt]).length&&delete e.ext[Kt.DeviceExt],e.ext[Kt.UserExt]&&0===x.objKeys(e.ext[Kt.UserExt]).length&&delete e.ext[Kt.UserExt],e.ext[Kt.WebExt]&&0===x.objKeys(e.ext[Kt.WebExt]).length&&delete e.ext[Kt.WebExt],e.ext[Kt.OSExt]&&0===x.objKeys(e.ext[Kt.OSExt]).length&&delete e.ext[Kt.OSExt],e.ext[Kt.AppExt]&&0===x.objKeys(e.ext[Kt.AppExt]).length&&delete e.ext[Kt.AppExt],e.ext[Kt.TraceExt]&&0===x.objKeys(e.ext[Kt.TraceExt]).length&&delete e.ext[Kt.TraceExt]},e}(),Vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=110,t.identifier=Yt,t}return a(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},t.prototype.initialize=function(n,i,r,o){var a=this;e.prototype.initialize.call(this,n,i,r,o);var s=this._getTelCtx(),c=this.identifier,u=t.getDefaultConfig();this._extensionConfig=this._extensionConfig||t.getDefaultConfig();var l=function(e){p._extensionConfig[e]=function(){return s.getConfig(c,e,u[e]())}},p=this;for(var f in u)l(f);this.context=new Hn(i.logger,this._extensionConfig),this._breezeChannel=ft.getExtension(r,Jt),this.context.appId=function(){return a._breezeChannel?a._breezeChannel._appId:null}},t.prototype.processTelemetry=function(e,t){if(x.isNullOrUndefined(e));else{if(t=this._getTelCtx(t),e.name===qt.envelopeType&&t.diagLog().resetInternalMessageCount(),this.context.session&&"string"!=typeof this.context.session.id&&this.context.sessionManager.update(),this._processTelemetryInternal(e,t),this.context&&this.context.user&&this.context.user.isNewUser){this.context.user.isNewUser=!1;var n=new Me(Re,(Object(c.g)()||{}).userAgent||"");t.diagLog().logInternalMessage(y.CRITICAL,n)}this.processNext(e,t)}},t.prototype._processTelemetryInternal=function(e,t){e.tags||(e.tags=[]),e.ext||(e.ext={});var n=e.ext;n[Kt.DeviceExt]=n[Kt.DeviceExt]||{},n[Kt.WebExt]=n[Kt.WebExt]||{},n[Kt.UserExt]=n[Kt.UserExt]||{},n[Kt.OSExt]=n[Kt.OSExt]||{},n[Kt.AppExt]=n[Kt.AppExt]||{},n[Kt.TraceExt]=n[Kt.TraceExt]||{};var i=this.context;i.applySessionContext(e,t),i.applyApplicationContext(e,t),i.applyDeviceContext(e,t),i.applyOperationContext(e,t),i.applyUserContext(e,t),i.applyOperatingSystemContxt(e,t),i.applyWebContext(e,t),i.applyLocationContext(e,t),i.applyInternalContext(e,t),i.cleanUp(e,t)},t}(Ve);function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gn=["req","rsp","hkErr","fnErr"];function Wn(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function Kn(e,t,n,i,r){r>=0&&r<=2&&Wn(e,(function(e,o){var a=e.cbks,s=a[Gn[r]];if(s){t.ctx=function(){return i[o]=i[o]||{}};try{s.apply(t.inst,n)}catch(e){var c=t.err;try{var u=a[Gn[2]];u&&(t.err=e,u.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}function Xn(e,t,n,i){if(void 0===i&&(i=!0),e&&t&&n){var r=function e(t,n,i){var r=null;return t&&(t.hasOwnProperty(n)?r=t:i&&(r=e(t[c.o],n,!1))),r}(e,t,i),o=r[t];if(Bn(o)===c.m){var a=o._aiHooks;if(!a){var s=(l=a={i:0,n:t,f:o,h:[]},function(){var e=this,t=arguments,n=l.h,i={name:l.n,inst:e,ctx:null},r=[],o=[i];Wn(t,(function(e){o.push(e)})),Kn(n,i,o,r,0);var a=l.f;try{i.rslt=a.apply(e,t)}catch(e){throw i.err=e,Kn(n,i,o,r,3),e}return Kn(n,i,o,r,1),i.rslt});s._aiHooks=a,r[t]=s}var u={id:a.i,cbks:n,rm:function(){var e=this.id;Wn(a.h,(function(t,n){if(t.id===e)return a.h.splice(n,1),1}))}};return a.i++,a.h.push(u),u}}var l;return null}
/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.5.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var Yn=x.objKeys,Jn=x.arrForEach;function Qn(e,t,n){var i=0,r=e[t],o=e[n];return r&&o&&(i=mt.GetDuration(r,o)),i}function Zn(e,t,n,i,r){var o=0,a=Qn(n,i,r);return a&&(o=$n(e,t,ft.msToTimeSpan(a))),o}function $n(e,t,n){var i=0;e&&t&&n&&((e.ajaxPerf=e.ajaxPerf||{})[t]=n,i=1);return i}var ei=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.stateChangeAttached=!1},ti=function e(t,n,i){var r=i;this.perfMark=null,this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=0,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.xhrMonitoringState=new ei,this.clientFailure=0,this.traceID=t,this.spanID=n,un(e,this,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?dt.getAbsoluteUrl(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?st.sanitizeUrl(r,dt.getCompleteUrl(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,i){if(e.ajaxTotalDuration=Math.round(1e3*mt.GetDuration(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var r,o=((r={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method}).properties={HttpMethod:e.method},r);if(function(e,t){var n=e.perfTiming,i=t.properties||{},r=0,o=x.isString,a="redirect",s=a+"Start",c=a="End";if(n){r|=Zn(i,a,n,s,c),r|=Zn(i,"domainLookup",n,"domainLookupStart","domainLookupEnd"),r|=Zn(i,"connect",n,"connectStart","connectEnd"),r|=Zn(i,"request",n,"requestStart","requestEnd"),r|=Zn(i,"response",n,"responseStart","responseEnd"),r|=Zn(i,"networkConnect",n,"startTime","connectEnd"),r|=Zn(i,"sentRequest",n,"requestStart","responseEnd");var u=n.duration;u||(u=Qn(n,"startTime","responseEnd")||0),r|=$n(i,"duration",u),r|=$n(i,"perfTotal",u);var l=n.serverTiming;if(l){var p={};Jn(l,(function(e,t){var n=function(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e.name||""+t),i=p[n]||{};Jn(Yn(e),(function(t){var n=e[t];("name"!==t&&o(n)||x.isNumber(n))&&(i[t]&&(n=i[t]+";"+n),!n&&o(n)||(i[t]=n))})),p[n]=i})),r|=$n(i,"serverTiming",p)}r|=$n(i,"transferSize",n.transferSize),r|=$n(i,"encodedBodySize",n.encodedBodySize),r|=$n(i,"decodedBodySize",n.decodedBodySize)}else e.perfMark&&(r|=$n(i,"missing",e.perfAttempts));r&&(t.properties=i)}(e,o),n&&Yn(e.requestHeaders).length>0&&(o.properties=o.properties||{},o.properties.requestHeaders=e.requestHeaders),i){var a=i();if(a){var s=a.correlationContext;if(s&&(o.correlationContext=s),a.headerMap&&Yn(a.headerMap).length>0&&(o.properties=o.properties||{},o.properties.responseHeaders=a.headerMap),e.status>=400){var c=a.type;o.properties=o.properties||{},""!==c&&"text"!==c||(o.properties.responseText=a.responseText?a.statusText+" - "+a.responseText:a.statusText),"json"===c&&(o.properties.responseText=a.response?a.statusText+" - "+JSON.stringify(a.response):a.statusText)}}}return o}}))},ni=function(){function e(t,n){this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?this.traceId=t:this.traceId=ft.generateW3CId(),n&&e.isValidSpanId(n)?this.spanId=n:this.spanId=ft.generateW3CId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.5.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var ri=x.isNullOrUndefined,oi=x.arrForEach,ai=x.objKeys,si=0;function ci(e){var t="";try{ri(e)||ri(e.ajaxData)||ri(e.ajaxData.requestUrl)||(t+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return t}function ui(e,t,n,i,r){e.diagLog().throwInternal(y.CRITICAL,t,n,i,r)}function li(e,t,n,i,r){e.diagLog().throwInternal(y.WARNING,t,n,i,r)}function pi(e,t,n){return function(i){ui(e,t,n,{ajaxDiagnosticsMessage:ci(i.inst),exception:ft.dump(i.err)})}}function fi(e,t){return e&&t?e.indexOf(t):-1}var di=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var i,r,o,a,s=Object(c.f)(),u=!1,l=!1,p=s&&s.host&&s.host.toLowerCase(),f=t.getEmptyConfig(),d=!1,h=0,g=!1,m=0,v=!1,y=[],I={};return un(t,n,(function(e,n){function s(e,t,n){y.push(function(e,t,n){return e?Xn(e[c.o],t,n,!1):null}(e,t,n))}function _(e,t,n){var i=!1,r=((x.isString(t)?t:(t||{}).url||"")||"").toLowerCase(),o=fi(r,"?"),a=fi(r,"#");return(-1===o||-1!==a&&a<o)&&(o=a),-1!==o&&(r=r.substring(0,o)),ri(e)?ri(t)||(i="object"===ii(t)&&!0===t[vt]||!!n&&!0===n[vt]):i=!0===e[vt]||!0===r[vt],i?I[r]||(I[r]=1):I[r]&&(i=!0),i}function S(e,t){var n=!0,i=l;return ri(e)||(n=!0===t||!ri(e.ajaxData)),i&&n}function T(e){try{var t=e.responseType;if(""===t||"text"===t)return e.responseText}catch(e){}return null}function C(t){try{var n=t.getAllResponseHeaders();if(null!==n)if(-1!==fi(n.toLowerCase(),at.requestContextHeaderLowerCase)){var i=t.getResponseHeader(at.requestContextHeader);return ht.getCorrelationContext(i)}}catch(n){li(e,F,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ci(t),exception:ft.dump(n)})}}function w(e,t){if(t.requestUrl&&a&&g){var n=Object(c.h)();if(n&&x.isFunction(n.mark)){si++;var i=a+e+"#"+si;n.mark(i);var r=n.getEntriesByName(i);r&&1===r.length&&(t.perfMark=r[0])}}}function E(e,t,n,i){var r=t.perfMark,o=Object(c.h)(),a=f.maxAjaxPerfLookupAttempts,s=f.ajaxPerfLookupDelay,u=t.requestUrl,l=0;!function c(){try{if(o&&r){l++;for(var p=null,f=o.getEntries(),d=f.length-1;d>=0;d--){var h=f[d];if(h){if("resource"===h.entryType)h.initiatorType!==e||-1===fi(h.name,u)&&-1===fi(u,h.name)||(p=h);else if("mark"===h.entryType&&h.name===r.name){t.perfTiming=p;break}if(h.startTime<r.startTime-1e3)break}}}!r||t.perfTiming||l>=a||!1===t.async?(r&&x.isFunction(o.clearMarks)&&o.clearMarks(r.name),t.perfAttempts=l,n()):setTimeout(c,s)}catch(e){i(e)}}()}function D(t){var n="";try{ri(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){ui(e,U,"Failed to grab failed fetch diagnostics message",{exception:ft.dump(t)})}return n}function N(t,n,i,r,o,a){function s(t,n,r){var o=r||{};o.fetchDiagnosticsMessage=D(i),n&&(o.exception=ft.dump(n)),li(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",o)}r&&(r.responseFinishedTime=mt.Now(),r.status=n,E("fetch",r,(function(){var t=r.CreateTrackItem("Fetch",d,o);t?e.trackDependencyDataInternal(t):s(O,null,{requestSentTime:r.requestSentTime,responseFinishedTime:r.responseFinishedTime})}),(function(e){s(F,e,null)})))}function A(t){if(t&&t.headers)try{var n=t.headers.get(at.requestContextHeader);return ht.getCorrelationContext(n)}catch(n){li(e,F,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:D(t),exception:ft.dump(n)})}}e.initialize=function(p,h,x,I){if(!e.isInitialized()){n.initialize(p,h,x,I);var D=e._getTelCtx(),k=t.getDefaultConfig();oi(ai(k),(function(e){f[e]=D.getConfig(t.identifier,e,k[e])}));var L=f.distributedTracingMode;if(d=f.enableRequestHeaderTracking,g=f.enableAjaxPerfTracking,m=f.maxAjaxCallsPerView,v=f.enableResponseHeaderTracking,o=L===Ze.AI||L===Ze.AI_AND_W3C,r=L===Ze.AI_AND_W3C||L===Ze.W3C,g){var R=p.instrumentationKey||"unkwn";a=R.length>5?"ai.ajxmn."+R.substring(R.length-5)+".":"ai.ajxmn."+R+"."}if(!1===f.disableAjaxTracking&&function(e){var t=!1;if(("undefined"==typeof XMLHttpRequest?"undefined":ii(XMLHttpRequest))!==c.p&&!ri(XMLHttpRequest)){var n=XMLHttpRequest[c.o];t=!(ri(n)||ri(n.open)||ri(n.send)||ri(n.abort))}try{" a ".trim()}catch(e){t=!1}if(t)try{(new XMLHttpRequest).ajaxData={};var i=XMLHttpRequest[c.o].open;XMLHttpRequest[c.o].open=i}catch(n){t=!1,ui(e,U,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:ft.dump(n)})}return t}(e)&&!l&&(s(XMLHttpRequest,"open",{req:function(t,n,r,o){var a=t.inst,s=a.ajaxData;_(a,r)||!S(a,!0)||s&&s.xhrMonitoringState.openDone||function(t,n,r,o){var a=i&&i.telemetryTrace&&i.telemetryTrace.traceID||ft.generateW3CId(),s=ft.generateW3CId().substr(0,16),c=new ti(a,s,e.diagLog());c.method=n,c.requestUrl=r,c.xhrMonitoringState.openDone=!0,c.requestHeaders={},c.async=o,t.ajaxData=c,function(t){t.ajaxData.xhrMonitoringState.stateChangeAttached=b.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&S(t)&&function(t){var n=t.ajaxData;function i(n,i){var r=i||{};r.ajaxDiagnosticsMessage=ci(t),n&&(r.exception=ft.dump(n)),li(e,O,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",r)}n.responseFinishedTime=mt.Now(),n.status=t.status,E("xmlhttprequest",n,(function(){try{var r=n.CreateTrackItem("Ajax",d,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:C(t),type:t.responseType,responseText:T(t),response:t.response};if(v){var n=t.getAllResponseHeaders();if(n){var i=n.trim().split(/[\r\n]+/),r={};oi(i,(function(e){var t=e.split(": "),n=t.shift(),i=t.join(": ");r[n]=i})),e.headerMap=r}}return e}));r?e.trackDependencyDataInternal(r):i(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{try{t.ajaxData=null}catch(e){}}}),(function(e){i(e,null)}))}(t)}catch(i){var n=ft.dump(i);n&&-1!==fi(n.toLowerCase(),"c00c023f")||ui(e,j,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ci(t),exception:n})}}))}(t)}(a,n,r,o)},hkErr:pi(e,U,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),s(XMLHttpRequest,"send",{req:function(t,n){var i=t.inst,r=i.ajaxData;S(i)&&!r.xhrMonitoringState.sendDone&&(w("xhr",r),r.requestSentTime=mt.Now(),i=e.includeCorrelationHeaders(r,void 0,void 0,i),r.xhrMonitoringState.sendDone=!0)},hkErr:pi(e,q,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),s(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t.ajaxData;S(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:pi(e,M,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),d&&s(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var i=e.inst;S(i)&&(i.ajaxData.requestHeaders[t]=n)},hkErr:pi(e,Le,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),l=!0),function(){var t=(n=Object(c.b)(),!n||ri(n.Request)||ri(n.Request[c.o])||ri(n.fetch)?null:n.fetch);var n;if(!t)return;var r=Object(c.b)(),o=t.polyfill;!1===f.disableFetchTracking?(y.push(Xn(r,"fetch",{req:function(t,n,r){var a;if(u&&!_(null,n,r)&&(!o||!l)){var s=t.ctx();a=function(t,n){var r=i&&i.telemetryTrace&&i.telemetryTrace.traceID||ft.generateW3CId(),o=ft.generateW3CId().substr(0,16),a=new ti(r,o,e.diagLog());a.requestSentTime=mt.Now(),t instanceof Request?a.requestUrl=t?t.url:"":a.requestUrl=t;var s="GET";n&&n.method?s=n.method:t&&t instanceof Request&&(s=t.method);a.method=s;var c={};n&&n.headers&&d&&(c=n.headers);return a.requestHeaders=c,w("fetch",a),a}(n,r),r=e.includeCorrelationHeaders(a,n,r),s.data=a}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(t){return N(e,(t||{}).status,t,n,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:A(t)};if(v){var n={};t.headers.forEach((function(e,t){n[t]=e})),e.headerMap=n}return e})),t})).catch((function(i){throw N(e,0,t,n,null,{error:i.message}),i})))},hkErr:pi(e,U,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),u=!0):o&&y.push(Xn(r,"fetch",{req:function(e,t,n){_(null,t,n)}}));o&&(r.fetch.polyfill=o)}(),x.length>0&&x){for(var P=void 0,F=0;!P&&F<x.length;)x[F]&&x[F].identifier===Yt&&(P=x[F]),F++;P&&(i=P.context)}}},e.teardown=function(){oi(y,(function(e){e.rm()})),y=[],u=!1,l=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e.trackDependencyDataInternal(t,n)},e.includeCorrelationHeaders=function(t,n,a,s){var c=e._currentWindowHost||p;if(n){if(ht.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(a||(a={}),a.headers=new Headers(a.headers||n instanceof Request&&n.headers||{}),o){var u="|"+t.traceID+"."+t.spanID;a.headers.set(at.requestIdHeader,u),d&&(t.requestHeaders[at.requestIdHeader]=u)}if((h=f.appId||i&&i.appId())&&(a.headers.set(at.requestContextHeader,at.requestContextAppIdFormat+h),d&&(t.requestHeaders[at.requestContextHeader]=at.requestContextAppIdFormat+h)),r){var l=new ni(t.traceID,t.spanID);a.headers.set(at.traceParentHeader,l.toString()),d&&(t.requestHeaders[at.traceParentHeader]=l.toString())}return a}return a}if(s){if(ht.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(o){u="|"+t.traceID+"."+t.spanID;s.setRequestHeader(at.requestIdHeader,u),d&&(t.requestHeaders[at.requestIdHeader]=u)}var h;if((h=f.appId||i&&i.appId())&&(s.setRequestHeader(at.requestContextHeader,at.requestContextAppIdFormat+h),d&&(t.requestHeaders[at.requestContextHeader]=at.requestContextAppIdFormat+h)),r){l=new ni(t.traceID,t.spanID);s.setRequestHeader(at.traceParentHeader,l.toString()),d&&(t.requestHeaders[at.traceParentHeader]=l.toString())}}return s}},e.trackDependencyDataInternal=function(t,n,i){if(-1===m||h<m){f.distributedTracingMode!==Ze.W3C&&f.distributedTracingMode!==Ze.AI_AND_W3C||"string"!=typeof t.id||"."===t.id[t.id.length-1]||(t.id+=".");var r=Wt.create(t,Ft.dataType,Ft.envelopeType,e.diagLog(),n,i);e.core.track(r)}else h===m&&ui(e,ye,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++h}})),n}return a(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:Ze.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25}},t.getEmptyConfig=function(){var e=this.getDefaultConfig();return oi(ai(e),(function(t){e[t]=void 0})),e},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.identifier="AjaxDependencyPlugin",t}(Ve);
/*!
 * Application Insights JavaScript SDK - Web, 2.5.2
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */new(function(){function e(e){e.queue=e.queue||[],e.version=e.version||2;var t=e.config||{};if(t.connectionString){var n=_t.parse(t.connectionString),i=n.ingestionendpoint;t.endpointUrl=i?i+"/v2/track":t.endpointUrl,t.instrumentationKey=n.instrumentationkey||t.instrumentationKey}this.appInsights=new gn,this.properties=new Vn,this.dependencies=new di,this.core=new ot,this.snippet=e,this.config=t,this.getSKUDefaults()}return e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,i){this.appInsights.stopTrackPage(e,t,n,i)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){void 0===e&&(e=!0),x.arrForEach(this.core.getTransmissionControls(),(function(t){x.arrForEach(t,(function(t){t.flush(e)}))}))},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),x.arrForEach(this.core.getTransmissionControls(),(function(t){x.arrForEach(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e){void 0===e&&(e=!1);if(e&&this.config.extensions&&this.config.extensions.length>0)throw new Error("Extensions not allowed in legacy mode");var t=[],n=new Rn;return t.push(n),t.push(this.properties),t.push(this.dependencies),t.push(this.appInsights),this.core.initialize(this.config,t),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},e.prototype.updateSnippetDefinitions=function(e){for(var t in this)x.isString(t)&&(e[t]=this[t])},e.prototype.emptyQueue=function(){try{if(ft.isArray(this.snippet.queue)){for(var e=this.snippet.queue.length,t=0;t<e;t++){(0,this.snippet.queue[t])()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(e){e&&x.isFunction(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(Object(c.l)()||Object(c.j)()){var t=function(){e.onunloadFlush(!1);var t=e.appInsights.core._extensions[Yt];t&&t.context&&t.context._sessionManager&&t.context._sessionManager.backup()};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=x.addEventHandler("beforeunload",t);(n=x.addEventHandler("pagehide",t)||n)||e.appInsights.core.logger.throwInternal(y.CRITICAL,z,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||x.addEventHandler("pagehide",t)}},e.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&this.config.diagnosticLogInterval>0?this.config.diagnosticLogInterval:1e4},e}())({config:{instrumentationKey:document.querySelector("[".concat(r.a.META,"]")).getAttribute(r.a.META)}}).loadAppInsights()}]);